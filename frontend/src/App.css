/* Sophisticated Finance App Styles - Detailed & Beautiful Design */

@import url("https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600;700&family=Crimson+Text:wght@400;600;700&display=swap");

:root {
  --sage-green: #a8b5a0;
  --soft-beige: #ede6d8;
  --cream-white: #efe8da;
  --paper-white: #f1eadc;
  --muted-teal: #7ba098;
  --dusty-rose: #d4b5a0;
  --warm-gray: #c7c0b8;
  --charcoal: #4a4a4a;
  --text-soft: #6b6b6b;
  --accent-gold: #d4af37;
  --accent-coral: #f4a261;
  --accent-lavender: #c8a2c8;
  --gradient-soft: linear-gradient(135deg, #ede6d8, #efe8da);
  --gradient-sage: linear-gradient(135deg, #a8b5a0, #7ba098);
  --gradient-sunset: linear-gradient(135deg, #f4a261, #d4af37, #a8b5a0);
  --shadow-soft: 0 8px 32px rgba(168, 181, 160, 0.2);
  --shadow-card: 0 4px 20px rgba(0, 0, 0, 0.1);
  --shadow-button: 0 6px 24px rgba(168, 181, 160, 0.3);
  
  /* Warm overlay colors for better eye comfort */
  --warm-overlay: rgba(241, 234, 220, 0.98);
  --warm-overlay-light: rgba(241, 234, 220, 0.95);
  --warm-overlay-subtle: rgba(241, 234, 220, 0.8);
}

/* Dark Mode Variables */
[data-theme="dark"] {
  --sage-green: #7a8c6f;
  --soft-beige: #1a1812;
  --cream-white: #141210;
  --paper-white: #1c1a15;
  --muted-teal: #5c7a73;
  --dusty-rose: #a08970;
  --warm-gray: #4a453f;
  --charcoal: #e5e5e5;
  --text-soft: #c9c9c9;
  --accent-gold: #d4af37;
  --accent-coral: #f4a261;
  --accent-lavender: #c8a2c8;
  --gradient-soft: linear-gradient(135deg, #1a1812, #141210);
  --gradient-sage: linear-gradient(135deg, #7a8c6f, #5c7a73);
  --gradient-sunset: linear-gradient(135deg, #f4a261, #d4af37, #7a8c6f);
  --shadow-soft: 0 8px 32px rgba(0, 0, 0, 0.4);
  --shadow-card: 0 4px 20px rgba(0, 0, 0, 0.3);
  --shadow-button: 0 6px 24px rgba(122, 140, 111, 0.4);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: "Inter", "Segoe UI", "Roboto", -apple-system, BlinkMacSystemFont,
    sans-serif;
  background: var(--soft-beige);
  min-height: 100vh;
  width: 100vw;
  color: var(--text-soft);
  position: relative;
  overflow-x: hidden;
  line-height: 1.6;
  font-weight: 400;
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Enhanced Typography System */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  line-height: 1.2;
  font-weight: 600;
}

h1 {
  font-family: "Playfair Display", serif;
  font-size: 2.5rem;
  font-weight: 700;
}

h2 {
  font-family: "Crimson Text", serif;
  font-size: 1.8rem;
  font-weight: 600;
}

h3 {
  font-family: "Crimson Text", serif;
  font-size: 1.4rem;
  font-weight: 600;
}

p,
span,
div {
  font-family: "Inter", sans-serif;
}

/* Beautiful background pattern with decorative elements */
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--soft-beige);
  background-image: radial-gradient(
      circle at 15% 25%,
      rgba(168, 181, 160, 0.08) 0%,
      transparent 40%
    ),
    radial-gradient(
      circle at 85% 75%,
      rgba(212, 181, 160, 0.06) 0%,
      transparent 35%
    ),
    radial-gradient(
      circle at 45% 60%,
      rgba(244, 162, 97, 0.04) 0%,
      transparent 30%
    ),
    linear-gradient(
      45deg,
      transparent 40%,
      rgba(168, 181, 160, 0.02) 50%,
      transparent 60%
    );
  z-index: -2;
}

.app {
  min-height: 100vh;
  max-width: 100vw;
  width: 100%;
  padding: 30px 40px;
  display: flex;
  flex-direction: column;
  position: relative;
  transition: background-color 0.3s ease, color 0.3s ease;
  overflow-x: hidden;
}

/* Theme Toggle Button */
.theme-toggle {
  position: fixed;
  top: 30px;
  right: 90px;
  width: 50px;
  height: 50px;
  border: none;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--cream-white), var(--soft-beige));
  border: 2px solid rgba(168, 181, 160, 0.3);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  transition: all 0.3s ease;
  box-shadow: var(--shadow-card);
  z-index: 1000;
}

.theme-toggle:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: var(--shadow-soft);
  border-color: var(--sage-green);
}

.theme-toggle:active {
  transform: translateY(0) scale(0.98);
}

/* Moon and Sun Icons */
.moon-icon,
.sun-icon {
  transition: all 0.3s ease;
  color: var(--charcoal);
}

.moon-icon {
  font-size: 18px;
}

.sun-icon {
  font-size: 20px;
}

/* Animated leaf design - Top Left */
.app::before {
  content: "";
  position: fixed;
  top: 20px;
  left: 20px;
  width: 50px;
  height: 50px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path d="M8 25 Q18 12, 25 25 Q32 12, 42 25 Q32 38, 25 25 Q18 38, 8 25 Z" fill="%2368A065" opacity="0.9"/><path d="M12 25 Q20 16, 25 25 Q30 16, 38 25 Q30 34, 25 25 Q20 34, 12 25 Z" fill="%234F7942" opacity="0.7"/><path d="M16 25 Q22 19, 25 25 Q28 19, 34 25 Q28 31, 25 25 Q22 31, 16 25 Z" fill="%2356B649" opacity="0.5"/></svg>')
    no-repeat center;
  background-size: contain;
  animation: leafFloatCorner 8s ease-in-out infinite;
  z-index: 10;
}

/* Animated leaf design - Top Right */
.app::after {
  content: "";
  position: fixed;
  top: 20px;
  right: 20px;
  width: 45px;
  height: 45px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><path d="M7 22 Q16 10, 22 22 Q28 10, 38 22 Q28 34, 22 22 Q16 34, 7 22 Z" fill="%2356B649" opacity="0.9"/><path d="M10 22 Q17 14, 22 22 Q27 14, 35 22 Q27 30, 22 22 Q17 30, 10 22 Z" fill="%2368A065" opacity="0.7"/><path d="M13 22 Q19 17, 22 22 Q25 17, 32 22 Q25 27, 22 22 Q19 27, 13 22 Z" fill="%234F7942" opacity="0.5"/></svg>')
    no-repeat center;
  background-size: contain;
  animation: leafFloatCorner 10s ease-in-out infinite reverse;
  z-index: 10;
}

@keyframes leafFloatCorner {
  0%,
  100% {
    transform: translateY(0px) rotate(0deg) scale(1);
    opacity: 0.9;
  }
  25% {
    transform: translateY(-8px) rotate(5deg) scale(1.05);
    opacity: 0.7;
  }
  50% {
    transform: translateY(-12px) rotate(-3deg) scale(1.1);
    opacity: 1;
  }
  75% {
    transform: translateY(-5px) rotate(7deg) scale(1.03);
    opacity: 0.8;
  }
}

.header {
  text-align: center;
  margin-bottom: 30px;
  padding: 0;
  background: transparent;
  border: none;
  box-shadow: none;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
}

.header-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.header h1 {
  color: var(--charcoal);
  font-size: 2.1rem;
  font-weight: 600;
  margin: 0;
  letter-spacing: 1px;
  background: linear-gradient(
    135deg,
    rgba(168, 181, 160, 0.2),
    rgba(245, 255, 245, 0.8)
  );
  padding: 15px 30px;
  border-radius: 35px;
  border: 2px solid rgba(168, 181, 160, 0.3);
  box-shadow: 0 8px 25px rgba(106, 176, 106, 0.15);
  font-family: "Playfair Display", serif;
  display: inline-block;
  position: relative;
  transition: all 0.3s ease;
}

.header h1:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 30px rgba(106, 176, 106, 0.2);
  border-color: rgba(168, 181, 160, 0.5);
}

.title-text {
  background: linear-gradient(135deg, var(--sage-green), var(--muted-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 700;
}

.title-icon {
  font-size: 2.2rem;
  margin-right: 12px;
  display: inline-block;
  animation: bounce 2s infinite;
}

.title-text {
  background: linear-gradient(135deg, var(--sage-green), var(--muted-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 700;
}

.header h1::after {
  content: "ï¿½";
  position: absolute;
  right: -45px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 2rem;
  animation: rotateFlower 4s linear infinite reverse;
}

@keyframes bounce {
  0%,
  20%,
  50%,
  80%,
  100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-8px);
  }
  60% {
    transform: translateY(-4px);
  }
}

.header p {
  color: var(--text-soft);
  font-size: 1rem;
  font-style: italic;
  margin-top: 5px;
  font-weight: 300;
}

.main-container {
  display: grid;
  grid-template-columns: 300px 1fr;
  gap: 40px;
  max-width: 100%;
  width: 100%;
  flex: 1;
  overflow-x: hidden;
}

/* New Tabbed Layout Styles */
.main-container-tabbed {
  display: grid;
  grid-template-columns: 1fr 300px;
  grid-template-rows: auto 1fr;
  gap: 20px;
  max-width: 100%;
  width: 100%;
  flex: 1;
  overflow-x: hidden;
}

/* Tab Navigation */
.tab-navigation {
  grid-column: 1 / 2;
  display: flex;
  gap: 10px;
  align-items: center;
  margin-bottom: 10px;
  padding: 10px;
  background: var(--cream-white);
  border-radius: 12px;
  box-shadow: var(--shadow-card);
  border: 1px solid rgba(168, 181, 160, 0.2);
}

.tab-button {
  padding: 12px 24px;
  border: none;
  border-radius: 8px;
  background: transparent;
  color: var(--text-soft);
  font-family: "Inter", sans-serif;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.tab-button:hover {
  background: rgba(168, 181, 160, 0.1);
  color: var(--charcoal);
  transform: translateY(-1px);
}

.tab-button.active {
  background: var(--sage-green);
  color: white;
  box-shadow: var(--shadow-button);
  transform: translateY(-2px);
}

.collapse-button {
  margin-left: auto;
  padding: 8px 12px;
  border: none;
  border-radius: 6px;
  background: rgba(168, 181, 160, 0.2);
  color: var(--text-soft);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.collapse-button:hover {
  background: var(--sage-green);
  color: white;
  transform: scale(1.1);
}

/* Tab Content Container */
.tab-content-container {
  grid-column: 1 / 2;
  position: relative;
  min-height: 500px;
  transition: all 0.3s ease;
  overflow: hidden;
}

.tab-content-container.collapsed {
  min-height: 0;
  height: 0;
  opacity: 0;
  pointer-events: none;
}

.tab-content {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0;
  pointer-events: none;
  transition: all 0.3s ease;
  transform: translateX(20px);
}

.tab-content.active {
  opacity: 1;
  pointer-events: all;
  transform: translateX(0);
}

/* Info Panel Container */
.info-panel-container {
  grid-column: 2 / 3;
  grid-row: 1 / 3;
}

/* Chart Layout in Tab */
.chart-layout {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  background: var(--cream-white);
  border-radius: 16px;
  padding: 30px;
  box-shadow: var(--shadow-card);
  border: 1px solid rgba(168, 181, 160, 0.2);
}

.no-data-tab {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: var(--cream-white);
  border-radius: 16px;
  padding: 60px 30px;
  box-shadow: var(--shadow-card);
  border: 1px solid rgba(168, 181, 160, 0.2);
  text-align: center;
  min-height: 400px;
}

.no-data-tab h3 {
  color: var(--charcoal);
  margin-bottom: 16px;
  font-family: "Crimson Text", serif;
}

.no-data-tab p {
  color: var(--text-soft);
  font-size: 1.1rem;
  line-height: 1.6;
  font-family: "Inter", sans-serif;
}

/* Responsive Design for Tabbed Layout */
@media (max-width: 1200px) {
  .main-container-tabbed {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto 1fr;
  }

  .info-panel-container {
    grid-column: 1 / 2;
    grid-row: 3 / 4;
  }

  .tab-content-container {
    grid-column: 1 / 2;
    grid-row: 2 / 3;
  }
}

@media (max-width: 768px) {
  .tab-navigation {
    flex-direction: column;
    gap: 8px;
  }

  .tab-button {
    width: 100%;
    justify-content: center;
    padding: 16px;
  }

  .collapse-button {
    margin-left: 0;
    align-self: stretch;
  }
}

/* New Layout - Collapsible Expense Form + Always Visible Charts */
.main-container-new {
  display: grid;
  /* Narrow left expense panel (was 1fr 2fr ~ 33/66). Use fixed-ish min width and flexible main area */
  grid-template-columns: minmax(320px, 360px) 1fr;
  gap: 28px;
  max-width: 100%;
  width: 100%;
  flex: 1;
  overflow-x: hidden;
}

/* Expense Section */
.expense-section {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.expense-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  background: var(--cream-white);
  border-radius: 12px;
  box-shadow: var(--shadow-card);
  border: 1px solid rgba(168, 181, 160, 0.2);
}

.expense-section-header h2 {
  margin: 0;
  color: var(--charcoal);
  font-family: "Crimson Text", serif;
  font-size: 1.5rem;
}

/* Remove collapsed styles - no longer needed */

/* Charts and Info Section */
.charts-info-section {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.chart-info-layout {
  display: flex;
  gap: 20px;
  align-items: flex-start;
}

.chart-area {
  background: var(--cream-white);
  border-radius: 16px;
  padding: 30px;
  box-shadow: var(--shadow-card);
  border: 1px solid rgba(168, 181, 160, 0.2);
  flex: 2;
  min-height: 300px;
  display: flex;
  flex-direction: column;
}

.info-area {
  flex: 1;
  min-width: 300px;
}

.no-data-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  text-align: center;
}

.no-data-section h3 {
  color: var(--charcoal);
  margin-bottom: 16px;
  font-family: "Crimson Text", serif;
}

.no-data-section p {
  color: var(--text-soft);
  font-size: 1.1rem;
  line-height: 1.6;
  font-family: "Inter", sans-serif;
}

/* Responsive Design for New Layout */
@media (max-width: 1200px) {
  .main-container-new {
    grid-template-columns: minmax(300px, 340px) 1fr;
    gap: 24px;
  }

  .charts-info-section {
    flex-direction: row;
    gap: 20px;
  }

  .chart-area {
    flex: 2;
  }

  .info-area {
    flex: 1;
  }
}

@media (max-width: 768px) {
  .main-container-new {
    gap: 15px;
    grid-template-columns: 1fr;
  }

  .charts-info-section {
    flex-direction: column;
  }

  .chart-info-layout {
    flex-direction: column;
  }

  .expense-section-header {
    padding: 15px;
  }

  .expense-section-header h2 {
    font-size: 1.3rem;
  }

  .chart-area {
    padding: 20px;
    min-height: 400px;
  }
}

@media (max-width: 1024px) {
  .main-container {
    grid-template-columns: 1fr;
    gap: 25px;
  }

  .app {
    padding: 15px;
  }

  .chart-info-layout {
    flex-direction: column;
  }
}

.card {
  background: var(--cream-white);
  border-radius: 16px;
  padding: 35px;
  box-shadow: var(--shadow-card);
  border: 1px solid rgba(168, 181, 160, 0.25);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  height: fit-content;
  overflow: hidden;
}

/* Decorative leaf elements for cards */
.card::before {
  content: "";
  position: absolute;
  top: 15px;
  left: 15px;
  width: 35px;
  height: 35px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 35"><path d="M5 17 Q12 8, 17 17 Q22 8, 30 17 Q22 26, 17 17 Q12 26, 5 17 Z" fill="%2368A065" opacity="0.8"/><path d="M8 17 Q14 11, 17 17 Q20 11, 27 17 Q20 23, 17 17 Q14 23, 8 17 Z" fill="%234F7942" opacity="0.6"/></svg>')
    no-repeat center;
  background-size: contain;
  animation: leafFloat 6s ease-in-out infinite;
}

.card::after {
  content: "";
  position: absolute;
  bottom: 15px;
  right: 15px;
  width: 30px;
  height: 30px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><path d="M4 15 Q10 7, 15 15 Q20 7, 26 15 Q20 23, 15 15 Q10 23, 4 15 Z" fill="%2368A065" opacity="0.7"/><path d="M7 15 Q11 10, 15 15 Q19 10, 23 15 Q19 20, 15 15 Q11 20, 7 15 Z" fill="%2356B649" opacity="0.5"/></svg>')
    no-repeat center;
  background-size: contain;
  animation: leafFloat 8s ease-in-out infinite reverse;
}

@keyframes leafFloat {
  0%,
  100% {
    transform: translateY(0px) rotate(0deg);
    opacity: 0.3;
  }
  50% {
    transform: translateY(-5px) rotate(5deg);
    opacity: 0.6;
  }
}

.card:hover {
  transform: translateY(-4px) scale(1.01);
  box-shadow: var(--shadow-soft);
  border-color: rgba(168, 181, 160, 0.4);
}

.card h2 {
  color: var(--charcoal);
  margin-bottom: 30px;
  font-size: 1.6rem;
  font-weight: 600;
  font-family: "Crimson Text", serif;
  position: relative;
  padding-bottom: 12px;
  border-bottom: 2px solid rgba(168, 181, 160, 0.2);
  letter-spacing: 0.8px;
}

.left-panel {
  position: sticky;
  top: 30px;
}

.expense-form {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Amount and Currency Group */
.amount-currency-group {
  display: flex;
  gap: 8px;
  align-items: center;
}

.rate-status {
  font-size: 11px;
  color: var(--text-soft);
  margin-top: 4px;
  font-style: italic;
  font-family: "Inter", sans-serif;
}

.amount-currency-group {
  display: flex;
  gap: 8px;
  align-items: center;
}

.refresh-rates-btn {
  background: var(--sage-green);
  border: none;
  border-radius: 6px;
  padding: 8px 12px;
  color: white;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s ease;
  min-width: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.refresh-rates-btn:hover:not(:disabled) {
  background: #7a8c6f;
  transform: scale(1.05);
}

.amount-currency-group input {
  flex: 3;
  margin: 0;
  min-width: 0; /* allow shrinking */
}

.currency-select {
  width: 100%;
  padding: 12px 16px;
  border: 1px solid var(--warm-gray);
  border-radius: 8px;
  background: var(--paper-white);
  color: var(--charcoal);
  font-size: 0.95rem;
  transition: all 0.3s ease;
  font-family: "Inter", sans-serif;
  cursor: pointer;
}

/* Ensure dropdowns are not clipped */
.expense-form-tab,
.expense-form,
.form-group,
.amount-currency-group {
  overflow: visible;
}

.category-toggle-btn:focus-visible,
.add-category-toggle-btn:focus-visible,
.delete-category-btn:focus-visible,
.currency-select:focus-visible {
  outline: 3px solid rgba(168, 181, 160, 0.55);
  outline-offset: 2px;
}

.form-group label {
  font-weight: 600;
  color: var(--charcoal);
  font-size: 0.95rem;
  letter-spacing: 0.5px;
  font-family: "Crimson Text", serif;
  margin-bottom: 2px;
}

.form-group input,
.form-group select {
  padding: 15px 20px;
  border: 2px solid var(--warm-gray);
  border-radius: 12px;
  font-size: 1rem;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  background: var(--paper-white);
  color: var(--charcoal);
  font-family: "Inter", sans-serif;
  font-weight: 400;
  position: relative;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.02);
}

.form-group input::placeholder {
  color: #9ca3af;
  font-style: italic;
  font-weight: 300;
}

.form-group input:focus,
.form-group select:focus {
  outline: none;
  border-color: var(--sage-green);
  box-shadow: 0 0 0 4px rgba(168, 181, 160, 0.15),
    inset 0 2px 4px rgba(168, 181, 160, 0.1);
  transform: translateY(-1px);
}

/* Enhanced date picker styling */
.form-group input[type="date"] {
  position: relative;
  cursor: pointer;
  background: var(--paper-white);
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23a8b5a0"><path d="M19 3h-1V1h-2v2H8V1H6v2H5C3.89 3 3 3.9 3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg>');
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 18px 18px;
  padding-right: 40px;
  min-width: 0;
  width: 100%;
}

.form-group input[type="date"]::-webkit-calendar-picker-indicator {
  opacity: 0;
  cursor: pointer;
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  width: 18px;
  height: 18px;
}

.btn-primary {
  background: var(--gradient-sage);
  color: white;
  border: none;
  padding: 16px 32px;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  margin-top: 15px;
  letter-spacing: 0.5px;
  position: relative;
  box-shadow: var(--shadow-button);
  text-transform: uppercase;
  font-size: 0.9rem;
  font-family: "Inter", sans-serif;
}

.btn-primary::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.2) 0%,
    transparent 50%
  );
  border-radius: 12px;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.btn-primary:hover {
  background: var(--gradient-sunset);
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 8px 32px rgba(168, 181, 160, 0.4);
}

.btn-primary:hover::before {
  opacity: 1;
}

/* Expense Form Tab Styles */
.expense-form-tab {
  background: var(--cream-white);
  border-radius: 16px;
  padding: 24px;
  box-shadow: var(--shadow-card);
  border: 1px solid rgba(168, 181, 160, 0.2);
  width: 100%;
  height: auto;
  max-width: 100%;
  /* Stretch to fill column and allow internal elements to expand */
  align-self: stretch;
  display: flex;
  flex-direction: column;
  /* Allow dropdowns & popovers to extend outside (prevents select clipping) */
  overflow: visible;
  /* Prevent horizontal scrolling */
  box-sizing: border-box;
}

.expense-form-header {
  text-align: center;
  margin-bottom: 30px;
}

.expense-form-header h2 {
  color: var(--charcoal);
  margin-bottom: 8px;
  font-size: 2rem;
  font-family: "Crimson Text", serif;
}

.form-subtitle {
  color: var(--text-soft);
  font-size: 1.1rem;
  font-style: italic;
  font-family: "Inter", sans-serif;
}

.form-row {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 20px;
}

.btn-primary-large {
  width: 100%;
  padding: 16px 32px;
  font-size: 1.2rem;
  font-weight: 600;
  color: white;
  background: var(--gradient-sage);
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: "Inter", sans-serif;
  letter-spacing: 0.5px;
  box-shadow: var(--shadow-button);
  position: relative;
  overflow: hidden;
  margin-top: 20px;
}

.btn-primary-large::before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  transition: all 0.5s ease;
}

.btn-primary-large:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 32px rgba(168, 181, 160, 0.4);
}

.btn-primary-large:hover::before {
  left: 100%;
}

/* Expenses List Tab Styles */
.expenses-list-tab {
  margin-top: 40px;
}

.expenses-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 2px solid rgba(168, 181, 160, 0.2);
}

.expenses-controls {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

/* Search Section */
.expenses-search-section {
  margin-bottom: 16px;
}

.expenses-search-section .expense-search-input {
  width: 100%;
  max-width: none;
  min-width: auto;
}

.expense-count {
  background: linear-gradient(135deg, var(--sage-green), #8fa17f);
  color: white;
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
  font-family: "Inter", sans-serif;
  box-shadow: 0 2px 6px rgba(168, 181, 160, 0.2);
  letter-spacing: 0.3px;
}

.expand-toggle-btn {
  padding: 8px 16px;
  background: var(--paper-white);
  border: 2px solid var(--sage-green);
  border-radius: 20px;
  color: var(--sage-green);
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: "Inter", sans-serif;
  box-shadow: 0 2px 6px rgba(168, 181, 160, 0.1);
}

.expand-toggle-btn:hover {
  background: linear-gradient(135deg, var(--sage-green), #8fa17f);
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(168, 181, 160, 0.25);
}

.expand-toggle-btn:active {
  transform: translateY(0);
}

.expenses-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 16px;
  margin-bottom: 20px;
}

.expense-card {
  background: var(--paper-white);
  border-radius: 12px;
  padding: 16px;
  border: 1px solid rgba(168, 181, 160, 0.15);
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.expense-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-card);
  border-color: var(--sage-green);
}

.expense-card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
}

.expense-card-header h4 {
  color: var(--charcoal);
  font-size: 1rem;
  margin: 0;
  flex: 1;
  line-height: 1.3;
  font-family: "Inter", sans-serif;
}

.expense-card-header {
  position: relative;
}

/* Simplified integrated delete cap */
.delete-btn-card {
  position: relative;
  background: #ff4038;
  color: #fff;
  border: none;
  cursor: pointer;
  font-size: 16px;
  font-weight: 700;
  line-height: 1;
  padding: 0;
  width: 44px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: 12px;
  border-radius: 8px; /* independent pill style */
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
  transition: background 0.2s ease, transform 0.15s ease;
}

.delete-btn-card:hover,
.delete-btn-card:focus-visible {
  background: #e3261e;
  transform: translateY(-2px);
}

.delete-btn-card span {
  pointer-events: none;
}

.expense-card-details {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.expense-category {
  font-size: 0.85rem;
  color: var(--sage-green);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-family: "Inter", sans-serif;
}

.expense-date {
  font-size: 0.85rem;
  color: var(--text-soft);
  font-family: "Inter", sans-serif;
}

.expense-amount-card {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--charcoal);
  font-family: "Inter", sans-serif;
}

.show-more-expenses {
  text-align: center;
  padding: 16px;
  background: rgba(168, 181, 160, 0.05);
  border-radius: 8px;
  color: var(--text-soft);
  font-style: italic;
  font-family: "Inter", sans-serif;
}

/* Search Input */
.expense-search-input {
  padding: 12px 16px;
  border: 2px solid rgba(168, 181, 160, 0.2);
  border-radius: 12px;
  font-size: 0.95rem;
  outline: none;
  background: var(--paper-white);
  color: var(--charcoal);
  min-width: 150px;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(168, 181, 160, 0.05);
}

.expense-search-input:focus {
  border-color: var(--sage-green);
  box-shadow: 0 0 0 3px rgba(168, 181, 160, 0.15),
    0 4px 12px rgba(168, 181, 160, 0.1);
  transform: translateY(-1px);
}

.expense-search-input::placeholder {
  color: var(--text-soft);
  font-style: italic;
}

/* Simplified Expense Cards */
.expense-card-simple {
  background: var(--paper-white);
  border-radius: 12px;
  padding: 16px;
  border: 1px solid rgba(168, 181, 160, 0.2);
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(168, 181, 160, 0.08);
  position: relative;
  overflow: hidden;
}

.expense-card-simple::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 4px;
  background: var(--sage-green);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.expense-card-simple:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(168, 181, 160, 0.15);
  border-color: var(--sage-green);
}

.expense-card-simple:hover::before {
  opacity: 1;
}

.expense-card-main {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
  overflow: hidden;
  flex-wrap: wrap;
}

/* Add subtle animations */
.expense-card-simple .expense-category-badge,
.expense-card-simple .expense-date-simple,
.expense-card-simple .expense-amount-simple {
  transition: all 0.3s ease;
}

.expense-card-simple:hover .expense-category-badge {
  transform: scale(1.05);
}

.expense-card-simple:hover .expense-date-simple {
  background: rgba(168, 181, 160, 0.2);
}

.expense-date-simple {
  font-size: 0.85rem;
  color: var(--sage-green);
  font-weight: 600;
  min-width: 75px;
  flex-shrink: 0;
  background: rgba(168, 181, 160, 0.1);
  padding: 4px 8px;
  border-radius: 8px;
}

.expense-category-badge {
  background: linear-gradient(135deg, var(--sage-green), #8fa17f);
  color: white;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 0.7rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  flex-shrink: 0;
  box-shadow: 0 2px 6px rgba(168, 181, 160, 0.3);
  transition: all 0.2s ease;
}

.expense-category-badge:hover {
  transform: scale(1.05);
  box-shadow: 0 3px 8px rgba(168, 181, 160, 0.4);
}

.expense-amount-simple {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-left: auto;
  min-width: 0;
  flex-shrink: 1;
}

.expense-currency {
  font-size: 0.7rem;
  color: var(--text-soft);
  font-weight: 500;
  flex-shrink: 0;
}

.expense-value {
  font-size: 0.95rem;
  font-weight: 700;
  color: var(--sage-green);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0;
  max-width: 120px;
  text-shadow: 0 1px 2px rgba(168, 181, 160, 0.2);
}

.delete-btn-simple {
  background: rgba(220, 53, 69, 0.1);
  border: none;
  color: #dc3545;
  font-size: 16px;
  cursor: pointer;
  padding: 6px 8px;
  border-radius: 8px;
  transition: all 0.3s ease;
  flex-shrink: 0;
  margin-left: 8px;
  opacity: 0.7;
}

.delete-btn-simple:hover {
  background: #dc3545;
  color: white;
  transform: scale(1.1);
  opacity: 1;
  box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
}

.expense-description-simple {
  font-size: 0.85rem;
  color: var(--text-soft);
  font-style: italic;
  margin-top: 8px;
  padding: 8px 12px;
  background: rgba(168, 181, 160, 0.05);
  border-radius: 8px;
  border-left: 3px solid rgba(168, 181, 160, 0.3);
}

@media (max-width: 768px) {
  .form-row {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .expenses-grid {
    grid-template-columns: 1fr;
  }

  .expense-form-tab {
    padding: 20px;
  }

  .expenses-controls {
    flex-wrap: wrap;
    gap: 8px;
  }

  .expense-card-main {
    gap: 6px;
  }

  .expense-date-simple {
    min-width: 65px;
    font-size: 0.8rem;
  }

  .expense-category-badge {
    font-size: 0.65rem;
    padding: 3px 6px;
  }

  .expense-value {
    font-size: 0.85rem;
  }

  .expense-currency {
    font-size: 0.65rem;
  }

  .expand-toggle-btn {
    font-size: 0.8rem;
    padding: 5px 10px;
  }

  .expense-count {
    font-size: 0.8rem;
  }
}

/* Category Selection Section */
.category-selection-section {
  margin-bottom: 24px;
  padding: 24px;
  background: rgba(168, 181, 160, 0.05);
  border-radius: 12px;
  border: 1px solid rgba(168, 181, 160, 0.1);
}

.category-buttons-grid {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.category-toggle-btn {
  padding: 10px 16px; /* compact padding for vertical layout */
  background: transparent;
  border: 2px solid var(--sage-green);
  border-radius: 8px;
  color: var(--sage-green);
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: "Inter", sans-serif;
  font-weight: 500;
  position: relative;
  overflow: hidden;
  min-height: 36px; /* reduced for vertical stacking */
  line-height: 1.2;
  width: 100%; /* full width for vertical layout */
}

.category-toggle-btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-button);
}

.category-toggle-btn.selected {
  color: white;
  border-color: transparent;
  transform: translateY(-1px);
  box-shadow: var(--shadow-button);
}

.custom-category-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.custom-category-wrapper .category-toggle-btn {
  flex: 1;
  padding-right: 50px; /* make room for integrated delete area */
}

.delete-category-btn {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 40px;
  background: rgba(231, 76, 60, 0.9);
  color: white;
  border: none;
  border-radius: 0 6px 6px 0; /* only round the right corners */
  font-size: 14px;
  font-weight: 700;
  line-height: 1;
  cursor: pointer;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  font-family: system-ui, -apple-system, sans-serif;
  border-left: 1px solid rgba(255, 255, 255, 0.3);
}

.delete-category-btn:hover,
.delete-category-btn:focus-visible {
  background: rgba(192, 57, 43, 1);
  transform: none; /* no scaling, just color change */
}

/* Provide a slightly larger invisible hit area for touch */
.delete-category-btn::after {
  content: "";
  position: absolute;
  inset: -6px;
}

.add-category-toggle-btn {
  padding: 10px 16px;
  background: var(--cream-white);
  border: 2px dashed var(--sage-green);
  border-radius: 8px;
  color: var(--sage-green);
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: "Inter", sans-serif;
  font-weight: 500;
  width: 100%; /* full width for vertical layout */
  min-height: 36px;
}

.add-category-toggle-btn:hover {
  background: rgba(168, 181, 160, 0.1);
  transform: translateY(-2px);
}

/* Custom Category Modal */
.custom-category-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.custom-category-content {
  background: var(--paper-white);
  padding: 24px;
  border-radius: 12px;
  width: 90%;
  max-width: 400px;
  box-shadow: var(--shadow-card);
}

.custom-category-content h4 {
  margin: 0 0 20px 0;
  color: var(--charcoal);
  font-family: "Playfair Display", serif;
  font-size: 1.25rem;
  font-weight: 600;
}

.category-form-group {
  margin-bottom: 16px;
}

.category-form-group label {
  display: block;
  margin-bottom: 6px;
  color: var(--charcoal);
  font-weight: 500;
  font-family: "Inter", sans-serif;
}

.category-name-input {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--warm-gray);
  border-radius: 6px;
  font-size: 0.9rem;
  background: var(--cream-white);
  color: var(--charcoal);
  transition: border-color 0.2s ease;
}

.category-name-input:focus {
  outline: none;
  border-color: var(--sage-green);
}

.color-picker-group {
  display: flex;
  align-items: center;
  gap: 10px;
}

.color-picker {
  width: 40px;
  height: 40px;
  border: 1px solid var(--warm-gray);
  border-radius: 6px;
  cursor: pointer;
}

.color-preview {
  width: 40px;
  height: 40px;
  border-radius: 6px;
  border: 1px solid var(--warm-gray);
}

.custom-category-buttons {
  display: flex;
  gap: 12px;
  margin-top: 20px;
}

.btn-custom-add,
.btn-custom-cancel {
  flex: 1;
  padding: 10px 16px;
  border: none;
  border-radius: 6px;
  font-weight: 500;
  font-family: "Inter", sans-serif;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-custom-add {
  background: var(--sage-green);
  color: white;
}

.btn-custom-add:hover:not(:disabled) {
  background: var(--muted-teal);
  transform: translateY(-1px);
}

.btn-custom-add:disabled {
  background: var(--warm-gray);
  cursor: not-allowed;
}

.btn-custom-cancel {
  background: var(--warm-gray);
  color: var(--charcoal);
}

.btn-custom-cancel:hover {
  background: var(--dusty-rose);
  transform: translateY(-1px);
}

/* Success Message */
.success-message {
  margin-top: 12px;
  padding: 12px 16px;
  background: linear-gradient(135deg, #d4edda, #c3e6cb);
  color: #155724;
  border-radius: 8px;
  border: 1px solid #c3e6cb;
  font-weight: 600;
  text-align: center;
  animation: slideInUp 0.3s ease, fadeOut 0.3s ease 1.7s;
  font-family: "Inter", sans-serif;
}

/* Error Message */
.error-message {
  margin-top: 12px;
  padding: 12px 16px;
  background: linear-gradient(135deg, #f8d7da, #f5c6cb);
  color: #721c24;
  border-radius: 8px;
  border: 1px solid #f5c6cb;
  font-weight: 600;
  text-align: center;
  animation: slideInUp 0.3s ease, fadeOut 0.3s ease 2.7s;
  font-family: "Inter", sans-serif;
}

/* Conversion Message */
.conversion-message {
  margin-top: 8px;
  padding: 8px 12px;
  background: linear-gradient(135deg, #e3f2fd, #bbdefb);
  color: #0d47a1;
  border-radius: 6px;
  border: 1px solid #90caf9;
  font-weight: 500;
  font-size: 0.85rem;
  text-align: center;
  animation: slideInUp 0.3s ease, fadeOut 0.3s ease 2.7s;
  font-family: "Inter", sans-serif;
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

/* Insights Banner */
.insights-banner {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 16px;
  padding: 20px;
  background: linear-gradient(135deg, var(--sage-green), #9db391);
  border-radius: 12px;
  margin: 0 0 24px 0;
  box-shadow: var(--shadow-card);
}

/* Full-width global banner above grid */
.insights-banner-global {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: stretch;
  gap: 40px;
  background: linear-gradient(90deg, var(--sage-green), var(--muted-teal));
  border-radius: 14px;
  padding: 22px 40px;
  box-shadow: var(--shadow-soft);
  margin: 0 0 28px 0;
}

.insights-banner-global .insight-item {
  flex: 1;
}

[data-theme="dark"] .insights-banner,
[data-theme="dark"] .insights-banner-global {
  background: linear-gradient(90deg, #4f5d47, #5c7a73);
  color: #ffffff;
}

[data-theme="dark"] .insights-banner .insight-item,
[data-theme="dark"] .insights-banner-global .insight-item {
  color: #ffffff;
}

[data-theme="dark"] .insights-banner .insight-label,
[data-theme="dark"] .insights-banner-global .insight-label {
  color: #f5f9f3;
}

[data-theme="dark"] .insights-banner .insight-value,
[data-theme="dark"] .insights-banner-global .insight-value {
  color: #ffffff;
}

.insight-item {
  text-align: center;
  color: white;
}

.insight-label {
  display: block;
  font-size: 0.85rem;
  opacity: 0.9;
  margin-bottom: 4px;
  font-family: "Inter", sans-serif;
  font-weight: 500;
}

.insight-value {
  display: block;
  font-size: 1.2rem;
  font-weight: 700;
  font-family: "Inter", sans-serif;
}

/* Category Selection Row */
.category-selection-row {
  display: flex;
  gap: 8px;
  align-items: flex-start;
  position: relative;
}

.category-select {
  flex: 1;
  padding: 10px 12px;
  border: 1px solid var(--warm-gray);
  border-radius: 6px;
  background: var(--cream-white);
  color: var(--charcoal);
  font-size: 0.9rem;
  transition: all 0.3s ease;
  font-family: "Inter", sans-serif;
}

.currency-select:focus {
  outline: none;
  border-color: var(--sage-green);
  box-shadow: 0 0 0 3px rgba(168, 181, 160, 0.2),
    inset 0 2px 4px rgba(168, 181, 160, 0.1);
  transform: translateY(-1px);
}

.add-category-btn {
  padding: 10px 16px;
  background: var(--sage-green);
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  transition: all 0.2s ease;
  font-family: "Inter", sans-serif;
  white-space: nowrap;
}

.add-category-btn:hover {
  background: #7a8c6f;
  transform: translateY(-1px);
}

/* Custom Category Modal */
.custom-category-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.custom-category-content {
  background: var(--cream-white);
  padding: 24px;
  border-radius: 12px;
  box-shadow: var(--shadow-card);
  min-width: 320px;
  max-width: 400px;
  animation: slideIn 0.2s ease;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.custom-category-content h4 {
  margin: 0 0 20px 0;
  color: var(--charcoal);
  font-family: "Crimson Text", serif;
  font-size: 1.3rem;
  text-align: center;
}

.category-form-group {
  margin-bottom: 16px;
}

.category-form-group label {
  display: block;
  margin-bottom: 6px;
  color: var(--charcoal);
  font-weight: 600;
  font-size: 0.9rem;
  font-family: "Inter", sans-serif;
}

.category-name-input {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--warm-gray);
  border-radius: 6px;
  font-size: 0.9rem;
  font-family: "Inter", sans-serif;
  box-sizing: border-box;
}

.category-name-input:focus {
  outline: none;
  border-color: var(--sage-green);
  box-shadow: 0 0 0 3px rgba(168, 181, 160, 0.1);
}

.color-picker-group {
  display: flex;
  align-items: center;
  gap: 12px;
}

.color-picker {
  width: 40px;
  height: 40px;
  border: 2px solid var(--warm-gray);
  border-radius: 6px;
  cursor: pointer;
  background: none;
}

.color-picker::-webkit-color-swatch {
  border: none;
  border-radius: 4px;
}

.color-preview {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 2px solid var(--warm-gray);
  display: inline-block;
}

/* Custom Category Input - Legacy (Remove if not needed) */
.custom-category-input {
  margin-top: 8px;
  padding: 16px;
  background: var(--cream-white);
  border: 2px solid var(--sage-green);
  border-radius: 8px;
  box-shadow: var(--shadow-card);
}

.custom-category-input input {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--warm-gray);
  border-radius: 6px;
  font-size: 0.9rem;
  margin-bottom: 12px;
  font-family: "Inter", sans-serif;
}

.custom-category-input input:focus {
  outline: none;
  border-color: var(--sage-green);
  box-shadow: 0 0 0 3px rgba(168, 181, 160, 0.1);
}

.custom-category-buttons {
  display: flex;
  gap: 8px;
  margin-top: 20px;
  justify-content: flex-end;
}

.btn-custom-add {
  padding: 10px 16px;
  background: var(--sage-green);
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  transition: all 0.2s ease;
  font-family: "Inter", sans-serif;
}

.btn-custom-add:hover:not(:disabled) {
  background: #7a8c6f;
  transform: translateY(-1px);
}

.btn-custom-add:disabled {
  background: var(--warm-gray);
  cursor: not-allowed;
  opacity: 0.6;
}

.btn-custom-cancel {
  padding: 10px 16px;
  background: var(--warm-gray);
  color: var(--charcoal);
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  transition: all 0.2s ease;
  font-family: "Inter", sans-serif;
}

.btn-custom-cancel:hover {
  background: #b5b5b5;
  transform: translateY(-1px);
}

/* Dark Mode Support for New Category Modal */
[data-theme="dark"] .custom-category-content {
  background: var(--soft-beige);
  border: 1px solid rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .category-select {
  background: var(--cream-white);
  border-color: rgba(122, 140, 111, 0.3);
  color: var(--charcoal);
}

[data-theme="dark"] .category-name-input {
  background: var(--cream-white);
  border-color: rgba(122, 140, 111, 0.3);
  color: var(--charcoal);
}

[data-theme="dark"] .color-picker {
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .color-preview {
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .conversion-message {
  background: linear-gradient(
    135deg,
    rgba(168, 181, 160, 0.2),
    rgba(168, 181, 160, 0.15)
  );
  color: var(--sage-green);
  border-color: rgba(122, 140, 111, 0.3);
}

/* Dark Mode Support for Custom Category */
[data-theme="dark"] .custom-category-input {
  background: var(--soft-beige);
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .custom-category-input input {
  background: var(--cream-white);
  border-color: rgba(122, 140, 111, 0.3);
  color: var(--charcoal);
}

/* Delete Confirmation Modal */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: modalFadeIn 0.2s ease-out;
}

.modal-content {
  background: var(--paper-white);
  border-radius: 16px;
  padding: 0;
  box-shadow: var(--shadow-soft);
  border: 1px solid rgba(168, 181, 160, 0.2);
  min-width: 320px;
  max-width: 400px;
  animation: modalSlideIn 0.3s ease-out;
  overflow: hidden;
}

.modal-header {
  padding: 24px 24px 16px 24px;
  border-bottom: 1px solid rgba(168, 181, 160, 0.15);
}

.modal-header h3 {
  font-family: "Playfair Display", serif;
  font-size: 20px;
  font-weight: 600;
  color: var(--charcoal);
  margin: 0;
}

.modal-body {
  padding: 20px 24px;
}

.modal-body p {
  font-family: "Inter", sans-serif;
  font-size: 14px;
  color: var(--text-soft);
  line-height: 1.6;
  margin: 0 0 12px 0;
}

.modal-body .category-name {
  color: var(--sage-green);
  font-weight: 600;
}

.modal-warning {
  color: var(--accent-coral) !important;
  font-size: 13px !important;
  font-style: italic;
}

.modal-actions {
  padding: 16px 24px 24px 24px;
  display: flex;
  gap: 12px;
  justify-content: flex-end;
}

.modal-btn {
  padding: 10px 20px;
  border-radius: 8px;
  border: none;
  font-family: "Inter", sans-serif;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  min-width: 80px;
}

.modal-btn-cancel {
  background: var(--cream-white);
  color: var(--text-soft);
  border: 1px solid rgba(168, 181, 160, 0.3);
}

.modal-btn-cancel:hover {
  background: var(--soft-beige);
  border-color: var(--sage-green);
}

.modal-btn-delete {
  background: linear-gradient(135deg, #f4a261, #e76f51);
  color: white;
  border: 1px solid transparent;
}

.modal-btn-delete:hover {
  background: linear-gradient(135deg, #e76f51, #d62d20);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(231, 111, 81, 0.3);
}

@keyframes modalFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes modalSlideIn {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Dark Mode Support for Delete Modal */
[data-theme="dark"] .modal-content {
  background: var(--soft-beige);
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .modal-header {
  border-bottom-color: rgba(122, 140, 111, 0.2);
}

[data-theme="dark"] .modal-btn-cancel {
  background: var(--cream-white);
  border-color: rgba(122, 140, 111, 0.4);
  color: var(--text-soft);
}

[data-theme="dark"] .modal-btn-cancel:hover {
  background: var(--paper-white);
  border-color: var(--sage-green);
}

.month-selector {
  display: flex;
  align-items: center;
  gap: 15px;
  margin-bottom: 30px;
  padding: 20px;
  background: var(--paper-white);
  border-radius: 12px;
  border: 1px solid rgba(168, 181, 160, 0.2);
  visibility: visible !important;
  opacity: 1 !important;
  flex-wrap: wrap;
}

.month-selector label {
  font-weight: 600;
  color: var(--charcoal);
  font-size: 1rem;
  white-space: nowrap;
  font-family: "Crimson Text", serif;
  letter-spacing: 0.3px;
}

.month-selector select {
  padding: 8px 12px;
  border: 1px solid var(--warm-gray);
  border-radius: 6px;
  background: var(--cream-white);
  color: var(--charcoal);
  font-size: 0.9rem;
  min-width: 100px;
  font-family: "Inter", sans-serif;
  font-weight: 400;
}

.month-picker {
  padding: 8px 12px;
  border: 1px solid var(--warm-gray);
  border-radius: 6px;
  background: var(--cream-white);
  color: var(--charcoal);
  font-size: 0.9rem;
  min-width: 150px;
  font-family: "Inter", sans-serif;
  font-weight: 400;
}

/* Enhanced month picker styling */
.month-picker {
  padding: 12px 16px;
  border: 2px solid rgba(168, 181, 160, 0.4);
  border-radius: 12px;
  background: linear-gradient(
    135deg,
    rgba(245, 255, 245, 0.9),
    rgba(235, 245, 235, 0.8)
  );
  color: var(--charcoal);
  font-size: 1rem;
  min-width: 150px;
  font-family: "Inter", sans-serif;
  font-weight: 500;
  transition: all 0.3s ease;
  cursor: pointer;
  box-shadow: 0 3px 12px rgba(168, 181, 160, 0.15);
}

.month-picker:hover {
  border-color: rgba(168, 181, 160, 0.6);
  box-shadow: 0 5px 15px rgba(168, 181, 160, 0.25);
  transform: translateY(-1px);
}

.month-picker:focus {
  outline: none;
  border-color: var(--sage-green);
  box-shadow: 0 0 0 3px rgba(168, 181, 160, 0.3);
}

/* Additional styling for dropdown arrows */
.month-picker {
  appearance: none;
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23a8b5a0"><path d="M7 10l5 5 5-5z"/></svg>');
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 16px;
  padding-right: 40px;
}

.month-picker:focus {
  outline: none;
  border-color: var(--sage-green);
  box-shadow: 0 0 0 4px rgba(168, 181, 160, 0.15),
    inset 0 2px 4px rgba(168, 181, 160, 0.1);
  transform: translateY(-1px);
}

.month-picker::-webkit-calendar-picker-indicator {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23a8b5a0"><path d="M19 3h-1V1h-2v2H8V1H6v2H5C3.89 3 3 3.9 3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg>');
  background-size: 20px 20px;
  cursor: pointer;
}

.chart-container {
  background: var(--paper-white);
  border-radius: 12px;
  padding: 40px;
  border: 1px solid rgba(168, 181, 160, 0.2);
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 500px;
  justify-content: center;
}

.chart-title {
  color: var(--charcoal);
  font-size: 1.3rem;
  margin-bottom: 30px;
  text-align: center;
  font-weight: 600;
  font-family: "Crimson Text", serif;
  letter-spacing: 0.6px;
}

/* Chart Legend Styling */
.chart-legend {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin-top: 30px;
  width: 100%;
  max-width: 600px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--cream-white);
  border-radius: 8px;
  border: 1px solid rgba(168, 181, 160, 0.15);
  transition: all 0.3s ease;
}

.legend-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(168, 181, 160, 0.2);
  border-color: rgba(168, 181, 160, 0.3);
}

.legend-color {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  flex-shrink: 0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.legend-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
}

.legend-category {
  font-weight: 500;
  color: var(--charcoal);
  font-size: 0.9rem;
  font-family: "Inter", sans-serif;
  letter-spacing: 0.3px;
}

.legend-amount {
  font-weight: 600;
  color: var(--sage-green);
  font-size: 1rem;
  font-family: "Inter", sans-serif;
  letter-spacing: 0.2px;
}

.summary-card {
  background: var(--cream-white);
  padding: 30px;
  border-radius: 12px;
  margin-bottom: 30px;
  text-align: center;
  border: 1px solid rgba(168, 181, 160, 0.2);
}

.total-amount {
  font-size: 2.5rem;
  font-weight: 300;
  color: var(--charcoal);
  margin-bottom: 8px;
  letter-spacing: 1px;
}

.currency {
  font-size: 1rem;
  color: var(--text-soft);
  font-style: normal;
  font-weight: 400;
}

.expenses-list {
  max-height: 400px;
  overflow-y: auto;
  margin-top: 25px;
}

.recent-expenses-title {
  color: var(--charcoal);
  margin: 0;
  font-size: 1.4rem;
  font-weight: 700;
  font-family: "Crimson Text", serif;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.expense-item {
  background: var(--paper-white);
  padding: 16px;
  border-radius: 8px;
  margin-bottom: 10px;
  border-left: 3px solid var(--sage-green);
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.2s ease;
}

.expense-item:hover {
  transform: translateX(2px);
  box-shadow: var(--shadow-card);
}

.expense-details h4 {
  color: var(--charcoal);
  margin-bottom: 4px;
  font-weight: 600;
  font-size: 0.95rem;
  font-family: "Inter", sans-serif;
  letter-spacing: 0.3px;
}

.expense-details p {
  color: var(--text-soft);
  font-size: 0.85rem;
  font-style: normal;
  font-family: "Inter", sans-serif;
  font-weight: 400;
}

.expense-amount {
  font-weight: 600;
  color: var(--muted-teal);
  font-size: 1rem;
  font-family: "Inter", sans-serif;
  letter-spacing: 0.2px;
}

.delete-btn {
  background: var(--dusty-rose);
  color: white;
  border: none;
  padding: 6px 10px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.8rem;
  margin-left: 10px;
  transition: all 0.2s ease;
  font-family: "Inter", sans-serif;
  font-weight: 500;
}

.delete-btn:hover {
  background: #c19a84;
}

.no-data {
  text-align: center;
  color: var(--text-soft);
  font-style: italic;
  padding: 40px 20px;
  background: var(--paper-white);
  border-radius: 8px;
  border: 1px dashed var(--warm-gray);
  font-family: "Inter", sans-serif;
  font-weight: 400;
  font-size: 1rem;
}

.loading {
  text-align: center;
  color: var(--sage-green);
  font-size: 1.1rem;
  padding: 40px;
  font-weight: 400;
}

/* Custom scrollbar with elegant theme */
.expenses-list::-webkit-scrollbar {
  width: 6px;
}

.expenses-list::-webkit-scrollbar-track {
  background: var(--cream-white);
  border-radius: 6px;
}

.expenses-list::-webkit-scrollbar-thumb {
  background: var(--sage-green);
  border-radius: 6px;
}

.expenses-list::-webkit-scrollbar-thumb:hover {
  background: var(--muted-teal);
}

/* Subtle floating elements - minimal like the design */
.floating-nature {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -1;
}

.nature-element {
  position: absolute;
  opacity: 0.08;
  font-size: 20px;
  animation: gentle-float 15s ease-in-out infinite;
}

@keyframes gentle-float {
  0%,
  100% {
    transform: translateY(0px) rotate(0deg);
  }
  50% {
    transform: translateY(-10px) rotate(2deg);
  }
}

/* Minimal positioning for floating elements */
.nature-element:nth-child(1) {
  top: 20%;
  left: 10%;
  animation-delay: 0s;
}
.nature-element:nth-child(2) {
  top: 60%;
  left: 85%;
  animation-delay: 5s;
}
.nature-element:nth-child(3) {
  top: 80%;
  left: 20%;
  animation-delay: 10s;
}

/* Right Panel Styling */
.right-panel {
  background: var(--warm-overlay-light);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  border: 2px solid #e6f3e6;
  padding: 15px;
  box-shadow: 0 8px 32px rgba(106, 176, 106, 0.1);
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
  height: fit-content;
  display: flex;
  flex-direction: column;
  gap: 15px;
  flex-shrink: 0;
  min-width: 0;
}

/* Decorative leaf elements for right panel */
.right-panel::before {
  content: "";
  position: absolute;
  top: 20px;
  right: 20px;
  width: 40px;
  height: 40px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><path d="M6 20 Q14 9, 20 20 Q26 9, 34 20 Q26 31, 20 20 Q14 31, 6 20 Z" fill="%2368A065" opacity="0.8"/><path d="M9 20 Q15 13, 20 20 Q25 13, 31 20 Q25 27, 20 20 Q15 27, 9 20 Z" fill="%234F7942" opacity="0.6"/></svg>')
    no-repeat center;
  background-size: contain;
  animation: leafFloat 7s ease-in-out infinite;
}

.right-panel::after {
  content: "";
  position: absolute;
  bottom: 20px;
  left: 20px;
  width: 35px;
  height: 35px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 35"><path d="M5 17 Q11 8, 17 17 Q23 8, 30 17 Q23 26, 17 17 Q11 26, 5 17 Z" fill="%2356B649" opacity="0.7"/><path d="M8 17 Q13 11, 17 17 Q21 11, 27 17 Q21 23, 17 17 Q13 23, 8 17 Z" fill="%2368A065" opacity="0.5"/></svg>')
    no-repeat center;
  background-size: contain;
  animation: leafFloat 9s ease-in-out infinite reverse;
}

/* Falling Leaves Animation */
.falling-leaves {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
  z-index: 1;
}

.falling-leaf {
  position: absolute;
  width: 12px;
  height: 12px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3 10 Q6 6, 10 10 Q14 6, 17 10 Q14 14, 10 10 Q6 14, 3 10 Z" fill="%2368A065" opacity="0.3"/></svg>')
    no-repeat center;
  background-size: contain;
  animation: fall linear infinite;
}

.falling-leaf:nth-child(1) {
  left: 15%;
  animation-duration: 12s;
  animation-delay: 0s;
}

.falling-leaf:nth-child(2) {
  left: 35%;
  animation-duration: 15s;
  animation-delay: 3s;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"><path d="M3 9 Q6 5, 9 9 Q12 5, 15 9 Q12 13, 9 9 Q6 13, 3 9 Z" fill="%237ba098" opacity="0.25"/></svg>')
    no-repeat center;
  background-size: contain;
}

.falling-leaf:nth-child(3) {
  left: 55%;
  animation-duration: 18s;
  animation-delay: 6s;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M4 11 Q7 7, 11 11 Q15 7, 18 11 Q15 15, 11 11 Q7 15, 4 11 Z" fill="%23a8b5a0" opacity="0.2"/></svg>')
    no-repeat center;
  background-size: contain;
}

.falling-leaf:nth-child(4) {
  left: 75%;
  animation-duration: 14s;
  animation-delay: 2s;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2 8 Q5 5, 8 8 Q11 5, 14 8 Q11 11, 8 8 Q5 11, 2 8 Z" fill="%2356B649" opacity="0.3"/></svg>')
    no-repeat center;
  background-size: contain;
}

.falling-leaf:nth-child(5) {
  left: 25%;
  animation-duration: 16s;
  animation-delay: 8s;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 19"><path d="M3 9.5 Q6 6, 9.5 9.5 Q13 6, 16 9.5 Q13 13, 9.5 9.5 Q6 13, 3 9.5 Z" fill="%23d4b5a0" opacity="0.25"/></svg>')
    no-repeat center;
  background-size: contain;
}

.falling-leaf:nth-child(6) {
  left: 65%;
  animation-duration: 20s;
  animation-delay: 10s;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 21"><path d="M4 10.5 Q7 6.5, 10.5 10.5 Q14 6.5, 17 10.5 Q14 14.5, 10.5 10.5 Q7 14.5, 4 10.5 Z" fill="%239fb3a3" opacity="0.2"/></svg>')
    no-repeat center;
  background-size: contain;
}

.falling-leaf:nth-child(7) {
  left: 10%;
  animation-duration: 22s;
  animation-delay: 4s;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M2 7.5 Q5 4, 7.5 7.5 Q10 4, 13 7.5 Q10 11, 7.5 7.5 Q5 11, 2 7.5 Z" fill="%23c7c0b8" opacity="0.2"/></svg>')
    no-repeat center;
  background-size: contain;
}

.falling-leaf:nth-child(8) {
  left: 45%;
  animation-duration: 13s;
  animation-delay: 7s;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><path d="M3 8.5 Q6 5, 8.5 8.5 Q11 5, 14 8.5 Q11 12, 8.5 8.5 Q6 12, 3 8.5 Z" fill="%23b8c5b8" opacity="0.25"/></svg>')
    no-repeat center;
  background-size: contain;
}

.falling-leaf:nth-child(9) {
  left: 85%;
  animation-duration: 19s;
  animation-delay: 1s;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14"><path d="M2 7 Q4 4, 7 7 Q10 4, 12 7 Q10 10, 7 7 Q4 10, 2 7 Z" fill="%2395a5a6" opacity="0.2"/></svg>')
    no-repeat center;
  background-size: contain;
}

.falling-leaf:nth-child(10) {
  left: 30%;
  animation-duration: 25s;
  animation-delay: 12s;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2 8 Q5 5, 8 8 Q11 5, 14 8 Q11 11, 8 8 Q5 11, 2 8 Z" fill="%238fb3a3" opacity="0.2"/></svg>')
    no-repeat center;
  background-size: contain;
}

.falling-leaf:nth-child(11) {
  left: 70%;
  animation-duration: 17s;
  animation-delay: 9s;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13"><path d="M2 6.5 Q4 4, 6.5 6.5 Q9 4, 11 6.5 Q9 9, 6.5 6.5 Q4 9, 2 6.5 Z" fill="%23d1c4b0" opacity="0.25"/></svg>')
    no-repeat center;
  background-size: contain;
}

.falling-leaf:nth-child(12) {
  left: 50%;
  animation-duration: 21s;
  animation-delay: 15s;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"><path d="M3 9 Q6 6, 9 9 Q12 6, 15 9 Q12 12, 9 9 Q6 12, 3 9 Z" fill="%23a8a8a8" opacity="0.2"/></svg>')
    no-repeat center;
  background-size: contain;
}

@keyframes fall {
  0% {
    transform: translateY(-50px) rotate(0deg);
    opacity: 0;
  }
  10% {
    opacity: 0.6;
  }
  20% {
    transform: translateY(20vh) rotate(45deg);
    opacity: 0.5;
  }
  40% {
    transform: translateY(40vh) rotate(90deg);
    opacity: 0.4;
  }
  60% {
    transform: translateY(60vh) rotate(135deg);
    opacity: 0.3;
  }
  80% {
    transform: translateY(80vh) rotate(180deg);
    opacity: 0.2;
  }
  100% {
    transform: translateY(calc(100vh + 50px)) rotate(225deg);
    opacity: 0;
  }
}

/* Chart and Info Layout */
.chart-info-layout {
  display: flex;
  gap: 15px;
  height: 100%;
  max-width: 100%;
  overflow-x: hidden;
}

/* Big Chart Container */
.big-chart-container {
  flex: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: linear-gradient(
    135deg,
    var(--cream-white),
    rgba(168, 181, 160, 0.05)
  );
  border-radius: 20px;
  padding: 20px;
  margin-right: 10px;
  max-width: calc(100% - 10px);
  overflow: visible; /* allow percentage labels outside slices */
}

.big-chart-container .chart-title {
  font-size: 1.6rem;
  font-weight: 600;
  color: var(--charcoal);
  margin-bottom: 15px;
  text-align: center;
  background: linear-gradient(
    135deg,
    rgba(168, 181, 160, 0.2),
    rgba(245, 255, 245, 0.8)
  );
  padding: 12px 24px;
  border-radius: 25px;
  border: 2px solid rgba(168, 181, 160, 0.3);
  position: relative;
  display: inline-block;
  box-shadow: 0 4px 15px rgba(106, 176, 106, 0.1);
  font-family: "Crimson Text", serif;
}

/* Show Labels Button for Touch Devices */
.show-labels-btn {
  display: block;
  margin: 15px auto;
  padding: 10px 20px;
  background: linear-gradient(
    135deg,
    var(--sage-green),
    rgba(168, 181, 160, 0.8)
  );
  color: var(--paper-white);
  border: 2px solid rgba(168, 181, 160, 0.5);
  border-radius: 20px;
  font-family: "Inter", sans-serif;
  font-weight: 600;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(122, 140, 111, 0.2);
}

.show-labels-btn:hover {
  background: linear-gradient(
    135deg,
    rgba(122, 140, 111, 0.9),
    rgba(168, 181, 160, 0.9)
  );
  border-color: rgba(168, 181, 160, 0.7);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(122, 140, 111, 0.3);
}

/* All Labels Display */
.all-labels-display {
  margin: 20px auto;
  padding: 20px;
  background: rgba(245, 255, 245, 0.95);
  border: 2px solid rgba(168, 181, 160, 0.3);
  border-radius: 15px;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  max-width: 600px;
}

.all-labels-display h3 {
  margin: 0 0 15px 0;
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--charcoal);
  text-align: center;
  font-family: "Crimson Text", serif;
  border-bottom: 2px solid rgba(168, 181, 160, 0.2);
  padding-bottom: 10px;
}

.labels-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 12px;
}

.labels-grid .label-item {
  display: flex;
  align-items: center;
  padding: 12px;
  background: rgba(255, 255, 255, 0.7);
  border: 1px solid rgba(168, 181, 160, 0.2);
  border-radius: 10px;
  transition: all 0.2s ease;
}

.labels-grid .label-item:hover {
  background: rgba(255, 255, 255, 0.9);
  border-color: rgba(168, 181, 160, 0.4);
  transform: translateY(-1px);
}

.labels-grid .color-dot {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  margin-right: 12px;
  border: 2px solid rgba(255, 255, 255, 0.8);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.labels-grid .label-info {
  flex: 1;
}

.labels-grid .label-name {
  font-weight: 600;
  color: var(--charcoal);
  font-size: 0.9rem;
  margin-bottom: 2px;
}

.labels-grid .label-amount {
  font-weight: 500;
  color: var(--sage-green);
  font-size: 0.85rem;
}

.labels-grid .label-percentage {
  font-weight: 400;
  color: #666;
  font-size: 0.8rem;
}

/* Yearly Trends Container - Specific spacing */
.yearly-trends-container {
  margin-top: 30px;
  margin-right: 0;
}

.yearly-trends-container .big-chart-area {
  height: 350px; /* Specific height for line chart */
}

/* Yearly Total Display */
.yearly-total-display {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  margin: 15px 0;
  padding: 15px 25px;
  background: linear-gradient(
    135deg,
    rgba(168, 181, 160, 0.15),
    rgba(245, 255, 245, 0.7)
  );
  border: 2px solid rgba(168, 181, 160, 0.3);
  border-radius: 20px;
  box-shadow: 0 4px 12px rgba(122, 140, 111, 0.1);
  max-width: 400px;
  margin-left: auto;
  margin-right: auto;
}

.yearly-total-label {
  font-family: "Inter", sans-serif;
  font-weight: 600;
  color: var(--charcoal);
  font-size: 1rem;
}

.yearly-total-amount {
  font-family: "Crimson Text", serif;
  font-weight: 700;
  color: var(--sage-green);
  font-size: 1.4rem;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.big-chart-area {
  width: 100%;
  height: 400px;
  max-width: 600px;
  padding: 8px; /* prevent clipping of labels on smaller screens */
}

.no-data-big {
  flex: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: #6b6b6b;
  font-size: 1.1rem;
  line-height: 1.6;
}

/* Info Panel on Right */
.info-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 20px;
  min-width: 250px;
  background: linear-gradient(
    135deg,
    var(--cream-white),
    rgba(168, 181, 160, 0.05)
  );
  border-radius: 20px;
  padding: 25px;
  overflow: visible;
}

/* Summary Info */
.summary-info {
  background: rgba(245, 255, 245, 0.8);
  border-radius: 12px;
  padding: 20px;
  border: 1px solid #d4e6d4;
  text-align: center;
  position: relative;
  overflow: visible;
}

/* Leaf decoration for summary info */
.summary-info::before {
  content: "";
  position: absolute;
  top: 8px;
  right: 8px;
  width: 25px;
  height: 25px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25"><path d="M3 12 Q8 6, 12 12 Q16 6, 22 12 Q16 18, 12 12 Q8 18, 3 12 Z" fill="%2368A065" opacity="0.9"/></svg>')
    no-repeat center;
  background-size: contain;
  animation: leafFloat 5s ease-in-out infinite;
}

.summary-info .total-amount {
  font-size: 2.2rem;
  font-weight: 700;
  background: linear-gradient(135deg, var(--sage-green), var(--muted-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  font-family: "Playfair Display", serif;
  letter-spacing: 0.3px;
}

.summary-info .currency {
  font-size: 1rem;
  color: var(--charcoal);
  margin-bottom: 12px;
  font-weight: 600;
  font-family: "Crimson Text", serif;
  letter-spacing: 0.5px;
}

.summary-info .expense-count {
  margin: 0;
  color: #6b6b6b;
  font-size: 0.9rem;
  font-family: "Inter", sans-serif;
  font-weight: 400;
}

/* Vertical Chart Legend */
.chart-legend-vertical {
  background: rgba(248, 252, 248, 0.9);
  border-radius: 12px;
  padding: 16px;
  border: 1px solid #e6f3e6;
  position: relative;
  overflow: hidden;
}

/* Leaf decoration for legend */
.chart-legend-vertical::before {
  content: "";
  position: absolute;
  bottom: 8px;
  left: 8px;
  width: 20px;
  height: 20px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 10 Q6 5, 10 10 Q14 5, 18 10 Q14 15, 10 10 Q6 15, 2 10 Z" fill="%2356B649" opacity="0.8"/></svg>')
    no-repeat center;
  background-size: contain;
  animation: leafFloat 6s ease-in-out infinite;
}

.legend-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--charcoal);
  margin: 0 0 12px 0;
  font-family: "Crimson Text", serif;
}

.legend-item-vertical {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.legend-item-vertical:last-child {
  margin-bottom: 0;
}

.legend-text-vertical {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
}

.legend-text-vertical .legend-category {
  font-weight: 500;
  color: var(--charcoal);
  font-size: 0.85rem;
  font-family: "Inter", sans-serif;
}

.legend-text-vertical .legend-amount {
  font-weight: 600;
  color: var(--sage-green);
  font-size: 0.8rem;
  font-family: "Inter", sans-serif;
}

/* Expense Meta Information Styling */
.expense-meta {
  font-size: 0.75rem;
  color: var(--text-soft);
  font-family: "Inter", sans-serif;
  font-weight: 400;
  margin-top: 2px;
}

.expense-original {
  font-size: 0.7rem;
  color: var(--muted-teal);
  font-family: "Inter", sans-serif;
  font-weight: 400;
  font-style: italic;
  margin-top: 1px;
}

/* Latest Expense Info */
.latest-expense-info {
  background: rgba(245, 255, 245, 0.8);
  border-radius: 12px;
  padding: 16px;
  border: 1px solid #d4e6d4;
  position: relative;
  overflow: hidden;
}

/* Leaf decoration for latest expense */
.latest-expense-info::before {
  content: "";
  position: absolute;
  top: 8px;
  left: 8px;
  width: 22px;
  height: 22px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M2 11 Q7 6, 11 11 Q15 6, 20 11 Q15 16, 11 11 Q7 16, 2 11 Z" fill="%234F7942" opacity="0.8"/></svg>')
    no-repeat center;
  background-size: contain;
  animation: leafFloat 7s ease-in-out infinite reverse;
}

.latest-expense-info .recent-title {
  font-size: 1rem;
  color: #4a6b4a;
  margin: 0 0 12px 0;
  font-weight: 600;
  font-family: "Crimson Text", serif;
}

.expense-item-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.expense-item-info .expense-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.expense-item-info .expense-desc {
  font-weight: 500;
  color: #2d4a2d;
  font-size: 0.9rem;
}

.expense-item-info .expense-details {
  font-size: 0.8rem;
  color: #6b6b6b;
}

.expense-item-info .expense-amount {
  font-weight: 600;
  color: #2d4a2d;
  font-size: 0.9rem;
}

/* Form Input Improvements */
.expense-form input,
.expense-form select {
  padding: 10px 14px;
  font-size: 0.9rem;
}

/* Override to remove rotating flowers from title */
.header h1::after {
  display: none !important;
}

/* Beautiful Tooltip Styling */
.tooltip {
  background: var(--warm-overlay);
  border: 2px solid var(--sage-green);
  border-radius: 12px;
  padding: 16px 20px;
  box-shadow: 0 8px 32px rgba(168, 181, 160, 0.3);
  backdrop-filter: blur(10px);
  font-family: "Inter", sans-serif;
  min-width: 200px;
  z-index: 1000;
  position: relative;
}

.tooltip-label {
  font-weight: 600;
  color: var(--charcoal);
  font-size: 1rem;
  margin: 0 0 8px 0;
  text-align: center;
  letter-spacing: 0.3px;
}

.tooltip-value {
  font-weight: 500;
  color: var(--sage-green);
  font-size: 1.1rem;
  margin: 0;
  text-align: center;
  background: linear-gradient(135deg, var(--sage-green), var(--muted-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Touch tooltip enhancement for mobile */
@media (hover: none) and (pointer: coarse) {
  .tooltip {
    position: fixed !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    z-index: 1000 !important;
    background: var(--warm-overlay) !important;
    border: 2px solid var(--sage-green) !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
    border-radius: 12px !important;
    padding: 16px 20px !important;
    font-size: 16px !important;
    min-width: 200px !important;
    animation: fadeInScale 0.2s ease-out;
  }

  [data-theme="dark"] .tooltip {
    background: rgba(30, 30, 30, 0.98) !important;
    border-color: var(--sage-green) !important;
    color: #ffffff !important;
  }
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.8);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

/* Ensure chart container has enough space for tooltips */
.big-chart-area {
  position: relative;
  overflow: visible;
  padding: 5px;
  width: 100%;
  height: 400px;
}

/* Remove focus outline for Recharts elements on touch devices */
@media (hover: none) and (pointer: coarse) {
  .recharts-wrapper * {
    outline: none !important;
  }

  .recharts-sector {
    outline: none !important;
    -webkit-tap-highlight-color: transparent;
  }

  .recharts-pie-sector {
    outline: none !important;
    -webkit-tap-highlight-color: transparent;
  }
}

/* General focus outline removal for chart elements */
.recharts-wrapper *:focus {
  outline: none !important;
}

.recharts-sector:focus,
.recharts-pie-sector:focus {
  outline: none !important;
}

/* Beautiful Month Display */
.month-display {
  text-align: center;
  margin-bottom: 8px;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
}

.month-text {
  font-family: "Inter", sans-serif;
  font-size: 1.6rem;
  font-weight: 600;
  color: var(--charcoal);
  padding: 10px 25px;
  border-radius: 25px;
  background: linear-gradient(
    135deg,
    rgba(168, 181, 160, 0.1),
    rgba(245, 255, 245, 0.8)
  );
  border: 2px solid rgba(168, 181, 160, 0.2);
  position: relative;
  letter-spacing: 0.5px;
  /* Remove the gradient text that was making it invisible */
}

.month-text::before {
  content: "";
  position: absolute;
  left: -15px;
  top: 50%;
  transform: translateY(-50%);
  width: 25px;
  height: 25px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25"><path d="M4 12.5 Q9 6, 12.5 12.5 Q16 6, 21 12.5 Q16 19, 12.5 12.5 Q9 19, 4 12.5 Z" fill="%2368A065" opacity="0.8"/><path d="M6.5 12.5 Q10 8.5, 12.5 12.5 Q15 8.5, 18.5 12.5 Q15 16.5, 12.5 12.5 Q10 16.5, 6.5 12.5 Z" fill="%234F7942" opacity="0.6"/></svg>')
    no-repeat center;
  background-size: contain;
  animation: leafGlow 4s ease-in-out infinite;
}

/* Calendar Popup Styles */
.calendar-selector {
  margin-bottom: 20px;
}

.calendar-trigger {
  background: rgba(245, 255, 245, 0.8);
  border: 2px solid rgba(168, 181, 160, 0.3);
  border-radius: 12px;
  padding: 16px 20px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
  overflow: hidden;
}

.calendar-trigger:hover {
  background: rgba(168, 181, 160, 0.1);
  border-color: var(--sage-green);
  transform: translateY(-2px);
  box-shadow: var(--shadow-card);
}

.current-period {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.month-name {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--charcoal);
  font-family: "Crimson Text", serif;
}

.year-name {
  font-size: 0.9rem;
  color: var(--text-soft);
  font-family: "Inter", sans-serif;
}

.calendar-icon {
  font-size: 1.5rem;
  opacity: 0.7;
}

.calendar-popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(4px);
}

.calendar-popup {
  background: var(--paper-white);
  border-radius: 20px;
  padding: 30px;
  min-width: 500px;
  max-width: 90vw;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: var(--shadow-soft);
  border: 2px solid rgba(168, 181, 160, 0.2);
}

.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
}

.calendar-instructions {
  text-align: center;
  margin-bottom: 20px;
  padding: 12px 20px;
  background: rgba(168, 181, 160, 0.05);
  border-radius: 8px;
  border: 1px solid rgba(168, 181, 160, 0.1);
}

.calendar-instructions p {
  margin: 0;
  color: var(--text-soft);
  font-size: 0.9rem;
  font-family: "Inter", sans-serif;
  font-style: italic;
}

.close-btn {
  background: none;
  border: none;
  font-size: 1.8rem;
  cursor: pointer;
  color: var(--text-soft);
  width: 35px;
  height: 35px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.close-btn:hover {
  background: rgba(168, 181, 160, 0.1);
  color: var(--charcoal);
}

.year-grid,
.month-grid-popup {
  margin-bottom: 25px;
}

.calendar-separator {
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(168, 181, 160, 0.3),
    transparent
  );
  margin: 20px 0;
  position: relative;
}

.calendar-separator::after {
  content: "â";
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  background: var(--paper-white);
  color: var(--sage-green);
  padding: 0 8px;
  font-size: 1.2rem;
  font-weight: bold;
}

.year-grid-title,
.month-grid-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--charcoal);
  margin-bottom: 15px;
  font-family: "Crimson Text", serif;
  text-align: center;
  letter-spacing: 0.5px;
}

.year-buttons {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
  gap: 10px;
  margin-bottom: 20px;
}

.year-btn {
  padding: 10px 16px;
  background: var(--cream-white);
  border: 2px solid rgba(168, 181, 160, 0.3);
  border-radius: 8px;
  color: var(--charcoal);
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: "Inter", sans-serif;
  font-weight: 500;
}

.year-btn:hover {
  background: rgba(168, 181, 160, 0.1);
  border-color: var(--sage-green);
  transform: translateY(-1px);
}

.year-btn.selected {
  background: var(--sage-green);
  color: white;
  border-color: var(--sage-green);
  box-shadow: var(--shadow-button);
}

.month-buttons {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 12px;
}

.month-btn-popup {
  padding: 12px 8px;
  background: var(--cream-white);
  border: 2px solid rgba(168, 181, 160, 0.3);
  border-radius: 10px;
  color: var(--charcoal);
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: "Inter", sans-serif;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.month-btn-popup:hover {
  background: rgba(168, 181, 160, 0.1);
  border-color: var(--sage-green);
  transform: translateY(-2px);
  box-shadow: var(--shadow-card);
}

.month-btn-popup.selected {
  background: var(--sage-green);
  color: white;
  border-color: var(--sage-green);
  box-shadow: var(--shadow-button);
}

.month-btn-popup.has-data {
  border-color: var(--muted-teal);
}

.month-btn-popup.no-data {
  opacity: 0.6;
  border-style: dashed;
}

.month-btn-popup .month-short {
  font-weight: 600;
  font-size: 0.85rem;
}

.month-btn-popup .month-full {
  font-size: 0.75rem;
  opacity: 0.8;
}

.month-btn-popup .data-indicator {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 8px;
  height: 8px;
  background: var(--muted-teal);
  border-radius: 50%;
}

.month-btn-popup.selected .data-indicator {
  background: var(--warm-overlay-subtle);
}

.month-text::after {
  content: "";
  position: absolute;
  right: -15px;
  top: 50%;
  transform: translateY(-50%);
  width: 25px;
  height: 25px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25"><path d="M4 12.5 Q9 6, 12.5 12.5 Q16 6, 21 12.5 Q16 19, 12.5 12.5 Q9 19, 4 12.5 Z" fill="%2368A065" opacity="0.8"/><path d="M6.5 12.5 Q10 8.5, 12.5 12.5 Q15 8.5, 18.5 12.5 Q15 16.5, 12.5 12.5 Q10 16.5, 6.5 12.5 Z" fill="%234F7942" opacity="0.6"/></svg>')
    no-repeat center;
  background-size: contain;
  animation: leafGlow 4s ease-in-out infinite reverse;
}

@keyframes leafGlow {
  0%,
  100% {
    opacity: 0.6;
    transform: translateY(-50%) scale(1);
  }
  50% {
    opacity: 0.9;
    transform: translateY(-50%) scale(1.1);
  }
}

/* Dark Mode Enhancements */
[data-theme="dark"] .big-chart-container {
  background: var(--soft-beige) !important;
  border-radius: 20px;
}

[data-theme="dark"] .info-panel {
  background: linear-gradient(
    135deg,
    var(--soft-beige),
    rgba(122, 140, 111, 0.1)
  );
}

[data-theme="dark"] .month-picker {
  background: rgba(45, 45, 45, 0.9) !important;
  border: 2px solid rgba(122, 140, 111, 0.4) !important;
  color: var(--soft-beige) !important;
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3) !important;
}

[data-theme="dark"] .month-picker:hover {
  border-color: rgba(122, 140, 111, 0.6) !important;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4) !important;
}

[data-theme="dark"] .month-picker:focus {
  border-color: rgba(122, 140, 111, 0.8) !important;
  box-shadow: 0 0 0 3px rgba(122, 140, 111, 0.3) !important;
}

[data-theme="dark"] .summary-info {
  background: rgba(20, 18, 16, 0.9);
  border: 1px solid rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .latest-expense-info {
  background: rgba(20, 18, 16, 0.9);
  border: 1px solid rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .chart-legend-vertical {
  background: rgba(20, 18, 16, 0.9);
  border: 1px solid rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .month-selector {
  background: var(--paper-white);
  border: 1px solid rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .form-group input,
[data-theme="dark"] .form-group select {
  background: var(--paper-white);
  border: 2px solid var(--warm-gray);
  color: var(--charcoal);
}

[data-theme="dark"] .form-group input:focus,
[data-theme="dark"] .form-group select:focus {
  border-color: var(--sage-green);
  box-shadow: 0 0 0 4px rgba(122, 140, 111, 0.2),
    inset 0 2px 4px rgba(122, 140, 111, 0.1);
}

[data-theme="dark"] .expense-item {
  background: var(--paper-white);
  border-left: 3px solid var(--sage-green);
}

[data-theme="dark"] .month-text {
  background: linear-gradient(
    135deg,
    var(--soft-beige),
    rgba(122, 140, 111, 0.2)
  );
  border: 2px solid rgba(122, 140, 111, 0.3);
  color: var(--charcoal);
}

[data-theme="dark"] .big-chart-container .chart-title {
  background: rgba(45, 45, 45, 0.8);
  border: 2px solid rgba(255, 255, 255, 0.1);
  color: var(--soft-beige);
}

/* Dark mode yearly trends styles */
[data-theme="dark"] .yearly-trends-container {
  background: linear-gradient(
    135deg,
    var(--paper-white),
    rgba(122, 140, 111, 0.05)
  );
}

[data-theme="dark"] .big-chart-area {
  background: var(--soft-beige);
  border-radius: 15px;
  color: #ffffff;
}

/* Dark mode yearly total display */
[data-theme="dark"] .yearly-total-display {
  background: linear-gradient(
    135deg,
    rgba(122, 140, 111, 0.15),
    rgba(45, 45, 45, 0.8)
  );
  border: 2px solid rgba(122, 140, 111, 0.4);
}

[data-theme="dark"] .yearly-total-label {
  color: var(--soft-beige);
}

[data-theme="dark"] .yearly-total-amount {
  color: rgba(168, 181, 160, 0.9);
}

[data-theme="dark"] .month-display {
  background: var(--soft-beige);
  border-radius: 20px;
  padding: 10px;
}

[data-theme="dark"] .right-panel {
  background: var(--soft-beige) !important;
  border: 2px solid rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .chart-info-layout {
  background: transparent;
}

/* Dark Mode Falling Leaves */
/* Touch friendly enhancements */
@media (pointer: coarse) {
  button,
  .category-toggle-btn,
  .currency-select,
  input,
  select {
    min-height: 48px;
    font-size: 1rem;
  }
  .category-buttons-grid {
    gap: 10px;
  }
  .expense-card {
    padding: 14px 16px;
  }
  .btn-primary-large {
    padding: 16px 20px;
    font-size: 1.05rem;
  }
}

/* Medium screen adjustments (Surface landscape) */
@media (max-width: 1300px) {
  .main-container-new {
    grid-template-columns: minmax(300px, 340px) 1fr;
  }
}

@media (max-width: 980px) {
  .main-container-new {
    display: flex;
    flex-direction: column;
  }
  .big-chart-area {
    height: 360px;
  }
}

/* Dark mode global text color enforcement */
[data-theme="dark"] body,
[data-theme="dark"] .app,
[data-theme="dark"] h1,
[data-theme="dark"] h2,
[data-theme="dark"] h3,
[data-theme="dark"] h4,
[data-theme="dark"] p,
[data-theme="dark"] span,
[data-theme="dark"] div {
  color: #f4f7f2 !important;
}

[data-theme="dark"] .insight-value,
[data-theme="dark"] .expense-amount-card,
[data-theme="dark"] .month-text {
  color: var(--sage-green) !important;
}

[data-theme="dark"] .expense-category,
[data-theme="dark"] .expense-date {
  color: #dfe5dd !important;
}
[data-theme="dark"] .falling-leaf:nth-child(1) {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3 10 Q6 6, 10 10 Q14 6, 17 10 Q14 14, 10 10 Q6 14, 3 10 Z" fill="%237a8c6f" opacity="0.2"/></svg>')
    no-repeat center;
  background-size: contain;
}

[data-theme="dark"] .falling-leaf:nth-child(2) {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"><path d="M3 9 Q6 5, 9 9 Q12 5, 15 9 Q12 13, 9 9 Q6 13, 3 9 Z" fill="%235c7a73" opacity="0.15"/></svg>')
    no-repeat center;
  background-size: contain;
}

[data-theme="dark"] .falling-leaf:nth-child(3) {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M4 11 Q7 7, 11 11 Q15 7, 18 11 Q15 15, 11 11 Q7 15, 4 11 Z" fill="%23a08970" opacity="0.15"/></svg>')
    no-repeat center;
  background-size: contain;
}

[data-theme="dark"] .falling-leaf:nth-child(4) {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2 8 Q5 5, 8 8 Q11 5, 14 8 Q11 11, 8 8 Q5 11, 2 8 Z" fill="%236b645b" opacity="0.2"/></svg>')
    no-repeat center;
  background-size: contain;
}

[data-theme="dark"] .falling-leaf:nth-child(5) {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 19"><path d="M3 9.5 Q6 6, 9.5 9.5 Q13 6, 16 9.5 Q13 13, 9.5 9.5 Q6 13, 3 9.5 Z" fill="%237a9380" opacity="0.15"/></svg>')
    no-repeat center;
  background-size: contain;
}

[data-theme="dark"] .falling-leaf:nth-child(6) {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 21"><path d="M4 10.5 Q7 6.5, 10.5 10.5 Q14 6.5, 17 10.5 Q14 14.5, 10.5 10.5 Q7 14.5, 4 10.5 Z" fill="%238fa38f" opacity="0.15"/></svg>')
    no-repeat center;
  background-size: contain;
}

[data-theme="dark"] .falling-leaf:nth-child(7) {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M2 7.5 Q5 4, 7.5 7.5 Q10 4, 13 7.5 Q10 11, 7.5 7.5 Q5 11, 2 7.5 Z" fill="%234a453f" opacity="0.15"/></svg>')
    no-repeat center;
  background-size: contain;
}

[data-theme="dark"] .falling-leaf:nth-child(8) {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><path d="M3 8.5 Q6 5, 8.5 8.5 Q11 5, 14 8.5 Q11 12, 8.5 8.5 Q6 12, 3 8.5 Z" fill="%238fa38f" opacity="0.15"/></svg>')
    no-repeat center;
  background-size: contain;
}

[data-theme="dark"] .falling-leaf:nth-child(9) {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14"><path d="M2 7 Q4 4, 7 7 Q10 4, 12 7 Q10 10, 7 7 Q4 10, 2 7 Z" fill="%236b7b7c" opacity="0.15"/></svg>')
    no-repeat center;
  background-size: contain;
}

[data-theme="dark"] .falling-leaf:nth-child(10) {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2 8 Q5 5, 8 8 Q11 5, 14 8 Q11 11, 8 8 Q5 11, 2 8 Z" fill="%236b8a7a" opacity="0.15"/></svg>')
    no-repeat center;
  background-size: contain;
}

[data-theme="dark"] .falling-leaf:nth-child(11) {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13"><path d="M2 6.5 Q4 4, 6.5 6.5 Q9 4, 11 6.5 Q9 9, 6.5 6.5 Q4 9, 2 6.5 Z" fill="%23a89e87" opacity="0.15"/></svg>')
    no-repeat center;
  background-size: contain;
}

[data-theme="dark"] .falling-leaf:nth-child(12) {
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"><path d="M3 9 Q6 6, 9 9 Q12 6, 15 9 Q12 12, 9 9 Q6 12, 3 9 Z" fill="%237d7d7d" opacity="0.15"/></svg>')
    no-repeat center;
  background-size: contain;
}

[data-theme="dark"] .header h1 {
  background: rgba(45, 45, 45, 0.8) !important;
  border: 2px solid rgba(255, 255, 255, 0.1);
  color: var(--soft-beige) !important;
}

[data-theme="dark"] .title-text {
  background: none !important;
  -webkit-background-clip: unset !important;
  -webkit-text-fill-color: white !important;
  background-clip: unset !important;
  color: white !important;
}

/* Dark Mode Tooltip Styling */
[data-theme="dark"] .tooltip {
  background: rgba(20, 18, 16, 0.95) !important;
  border: 2px solid rgba(122, 140, 111, 0.4) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4) !important;
  backdrop-filter: blur(10px) !important;
}

[data-theme="dark"] .tooltip-label {
  color: var(--sage-green) !important;
}

[data-theme="dark"] .tooltip-value {
  background: linear-gradient(
    135deg,
    var(--sage-green),
    var(--muted-teal)
  ) !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
}

/* Dark Mode - New Tabbed Layout */
[data-theme="dark"] .tab-navigation {
  background: var(--soft-beige);
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .tab-button:hover {
  background: rgba(122, 140, 111, 0.2);
  color: var(--charcoal);
}

[data-theme="dark"] .tab-button.active {
  background: var(--sage-green);
  color: white;
}

[data-theme="dark"] .collapse-button {
  background: rgba(122, 140, 111, 0.3);
  color: var(--text-soft);
}

[data-theme="dark"] .collapse-button:hover {
  background: var(--sage-green);
  color: white;
}

[data-theme="dark"] .expense-form-tab {
  background: var(--soft-beige);
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .chart-layout {
  background: var(--soft-beige);
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .no-data-tab {
  background: var(--soft-beige);
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .expense-card {
  background: var(--cream-white);
  border-color: rgba(122, 140, 111, 0.2);
}

[data-theme="dark"] .expense-card:hover {
  border-color: var(--sage-green);
}

[data-theme="dark"] .expense-count {
  background: var(--sage-green);
  color: white;
}

[data-theme="dark"] .expand-toggle-btn {
  background: var(--soft-beige);
  border-color: rgba(122, 140, 111, 0.3);
  color: var(--sage-green);
}

[data-theme="dark"] .expand-toggle-btn:hover {
  background: var(--sage-green);
  color: white;
}

[data-theme="dark"] .show-more-expenses {
  background: rgba(122, 140, 111, 0.1);
}

/* Dark Mode - Search Input */
[data-theme="dark"] .expense-search-input {
  background: var(--cream-white);
  border-color: rgba(122, 140, 111, 0.3);
  color: var(--charcoal);
}

[data-theme="dark"] .expense-search-input:focus {
  border-color: var(--sage-green);
  box-shadow: 0 0 0 2px rgba(122, 140, 111, 0.2);
}

[data-theme="dark"] .expense-search-input::placeholder {
  color: var(--text-soft);
}

/* Dark Mode - Simplified Expense Cards */
[data-theme="dark"] .expense-card-simple {
  background: var(--cream-white);
  border-color: rgba(122, 140, 111, 0.3);
  box-shadow: 0 2px 8px rgba(122, 140, 111, 0.1);
}

[data-theme="dark"] .expense-card-simple:hover {
  border-color: var(--sage-green);
  box-shadow: 0 4px 16px rgba(122, 140, 111, 0.2);
}

[data-theme="dark"] .expense-date-simple {
  color: var(--sage-green);
  background: rgba(122, 140, 111, 0.15);
}

[data-theme="dark"] .expense-currency {
  color: var(--text-soft);
}

[data-theme="dark"] .expense-value {
  color: var(--sage-green);
}

[data-theme="dark"] .expense-description-simple {
  color: var(--text-soft);
  background: rgba(122, 140, 111, 0.08);
  border-left-color: rgba(122, 140, 111, 0.4);
}

[data-theme="dark"] .delete-btn-simple {
  background: rgba(220, 53, 69, 0.15);
  color: #dc3545;
}

[data-theme="dark"] .delete-btn-simple:hover {
  background: rgba(220, 53, 69, 0.1);
  color: #dc3545;
}

/* Dark Mode - New Layout */
[data-theme="dark"] .expense-section-header {
  background: var(--soft-beige);
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .chart-area {
  background: var(--soft-beige);
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .no-data-section h3 {
  color: var(--charcoal);
}

[data-theme="dark"] .no-data-section p {
  color: var(--text-soft);
}

/* Currency display in info panel */
.currency-selector-section {
  margin-top: 1.5rem;
  border-top: 2px solid rgba(168, 181, 160, 0.2);
  padding-top: 1.5rem;
  overflow: visible;
}

.currency-display-trigger {
  position: relative;
  background: var(--gradient-sage);
  border: 2px solid var(--sage-green);
  border-radius: 12px;
  padding: 1rem 1.25rem;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden;
  min-height: 48px;
  box-shadow: var(--shadow-card);
}

.currency-display-trigger::before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  transition: left 0.5s;
}

.currency-display-trigger:hover::before {
  left: 100%;
}

.currency-display-trigger:hover {
  background: linear-gradient(135deg, var(--muted-teal), var(--sage-green));
  border-color: var(--muted-teal);
  transform: translateY(-1px);
  box-shadow: var(--shadow-button);
}

.current-currency {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: white;
  font-weight: 500;
  position: relative;
  z-index: 2;
}

.currency-code-main {
  font-size: 1.1rem;
  font-weight: 700;
  letter-spacing: 0.5px;
  color: white;
}

.currency-name {
  font-size: 0.9rem;
  opacity: 0.9;
  font-weight: 400;
  color: rgba(255, 255, 255, 0.9);
}

.currency-dropdown {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 1.25rem;
}

.currency-select-styled {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  cursor: pointer;
  border: none;
  background: transparent;
  z-index: 3;
  font-size: 1rem;
}

.currency-icon {
  font-size: 1.2rem;
  opacity: 0.8;
  transition: transform 0.3s ease;
  position: relative;
  z-index: 1;
  color: white;
}

.currency-display-trigger:hover .currency-icon {
  transform: rotate(20deg) scale(1.1);
}

/* Dark mode currency styles */
[data-theme="dark"] .currency-selector-section {
  border-top-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .currency-display-trigger {
  background: var(--gradient-sage);
  border-color: var(--sage-green);
  box-shadow: var(--shadow-card);
}

[data-theme="dark"] .currency-display-trigger:hover {
  background: linear-gradient(135deg, var(--sage-green), var(--muted-teal));
  border-color: var(--muted-teal);
  box-shadow: var(--shadow-button);
}

[data-theme="dark"] .current-currency {
  color: var(--charcoal);
}

[data-theme="dark"] .currency-code-main {
  color: var(--charcoal);
}

[data-theme="dark"] .currency-name {
  color: var(--text-soft);
}

[data-theme="dark"] .currency-icon {
  color: var(--charcoal);
}

/* Custom Currency Dropdown Styling */
.currency-selector-container {
  position: relative;
}

.currency-dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: var(--paper-white);
  border: 2px solid var(--sage-green);
  border-radius: 12px;
  box-shadow: var(--shadow-button);
  backdrop-filter: blur(10px);
  max-height: 250px;
  overflow-y: scroll;
  z-index: 1000;
  margin-top: 4px;
  animation: dropdownSlideIn 0.2s ease-out;
}

/* Hide scrollbar for WebKit browsers (Chrome, Safari, Edge) */
.currency-dropdown-menu::-webkit-scrollbar {
  width: 0;
  height: 0;
}

.currency-dropdown-menu::-webkit-scrollbar-track {
  background: transparent;
}

.currency-dropdown-menu::-webkit-scrollbar-thumb {
  background: transparent;
}

/* Hide scrollbar for Firefox */
.currency-dropdown-menu {
  scrollbar-width: none;
}

/* Hide scrollbar for IE and older Edge */
.currency-dropdown-menu {
  -ms-overflow-style: none;
}

@keyframes dropdownSlideIn {
  from {
    opacity: 0;
    transform: translateY(-10px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.currency-dropdown-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-bottom: 1px solid rgba(168, 181, 160, 0.1);
  font-family: "Inter", sans-serif;
}

.currency-dropdown-item:last-child {
  border-bottom: none;
}

.currency-dropdown-item:hover {
  background: var(--gradient-sage);
  color: white;
}

.currency-dropdown-item.selected {
  background: var(--sage-green);
  color: white;
  font-weight: 600;
}

.currency-dropdown-item.selected .currency-code {
  color: white;
}

.currency-dropdown-item .currency-code {
  font-weight: 700;
  font-size: 0.9rem;
  min-width: 45px;
  letter-spacing: 0.5px;
  color: var(--sage-green);
}

.currency-dropdown-item .currency-symbol {
  font-weight: 500;
  font-size: 0.85rem;
  opacity: 0.8;
  min-width: 40px;
}

.currency-dropdown-item .currency-full-name {
  font-weight: 400;
  font-size: 0.85rem;
  opacity: 0.9;
  flex: 1;
}

/* Dark mode currency dropdown */
[data-theme="dark"] .currency-dropdown-menu {
  background: var(--paper-white);
  border-color: var(--sage-green);
}

[data-theme="dark"] .currency-dropdown-item {
  color: var(--charcoal);
  border-bottom-color: rgba(122, 140, 111, 0.2);
}

[data-theme="dark"] .currency-dropdown-item:hover {
  background: var(--gradient-sage);
  color: white;
}

[data-theme="dark"] .currency-dropdown-item.selected {
  background: var(--sage-green);
  color: white;
}

[data-theme="dark"] .currency-dropdown-item .currency-code {
  color: var(--sage-green);
}

[data-theme="dark"] .currency-dropdown-item.selected .currency-code {
  color: white;
}

.currency-display {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 10px;
  font-size: 14px;
  opacity: 0.8;
}

.currency-label {
  margin-right: 5px;
}

.currency-code {
  font-weight: bold;
  background: var(--primary-color);
  color: white;
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 12px;
}

.currency-selector {
  margin-top: 8px;
}

.currency-selector label {
  display: block;
  font-size: 12px;
  color: var(--text-soft);
  margin-bottom: 4px;
  font-weight: 500;
}

.currency-select-display {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid var(--warm-gray);
  border-radius: 8px;
  background: var(--paper-white);
  color: var(--charcoal);
  font-size: 13px;
  transition: all 0.2s ease;
}

.currency-select-display:focus {
  border-color: var(--sage-green);
  outline: none;
  box-shadow: 0 0 0 2px rgba(122, 140, 111, 0.2);
}

/* Expense original currency display */
.expense-original-currency {
  font-size: 11px;
  color: var(--text-soft);
  font-style: italic;
  margin-top: 2px;
  display: block;
}

.expense-amounts {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.expense-amount-converted {
  font-size: 16px;
  font-weight: 600;
  color: var(--sage-green);
}

.conversion-indicator {
  font-size: 10px;
  color: var(--text-soft);
  font-style: italic;
  margin-top: 2px;
}

/* Recent expenses list */
.recent-expenses-list {
  margin-top: 20px;
  border-top: 1px solid var(--warm-gray);
  padding-top: 15px;
}

.expenses-scroll {
  max-height: 300px;
  overflow-y: auto;
  margin-top: 10px;
}

.expense-row {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 8px 0;
  border-bottom: 1px solid rgba(122, 140, 111, 0.1);
}

.expense-row:last-child {
  border-bottom: none;
}

.expense-row-info {
  flex: 1;
  margin-right: 10px;
}

.expense-row-desc {
  display: block;
  font-weight: 500;
  font-size: 13px;
  color: var(--charcoal);
  margin-bottom: 2px;
}

.expense-row-category {
  display: block;
  font-size: 11px;
  color: var(--text-soft);
  margin-bottom: 1px;
}

.expense-row-amounts {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  min-width: 80px;
}

.expense-row-converted {
  font-weight: 600;
  font-size: 13px;
  color: var(--sage-green);
}

.expense-row-conversion {
  font-size: 9px;
  color: var(--text-soft);
  font-style: italic;
  margin-top: 1px;
}

/* Dark mode for rate status */
[data-theme="dark"] .rate-status {
  color: #e2e8f0;
}

/* Dark mode for currency selector */
[data-theme="dark"] .currency-select-display {
  background: var(--soft-beige);
  border-color: rgba(122, 140, 111, 0.3);
  color: var(--charcoal);
}

[data-theme="dark"] .currency-select-display:focus {
  border-color: var(--sage-green);
  box-shadow: 0 0 0 2px rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .expense-original-currency {
  color: rgba(255, 255, 255, 0.6);
}

[data-theme="dark"] .conversion-indicator {
  color: rgba(255, 255, 255, 0.5);
}

[data-theme="dark"] .expense-amount-converted {
  color: var(--sage-green);
}

/* Dark mode for recent expenses */
[data-theme="dark"] .recent-expenses-list {
  border-top-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .expense-row {
  border-bottom-color: rgba(122, 140, 111, 0.1);
}

[data-theme="dark"] .expense-row-desc {
  color: white;
}

[data-theme="dark"] .expense-row-category {
  color: rgba(255, 255, 255, 0.6);
}

[data-theme="dark"] .expense-row-converted {
  color: var(--sage-green);
}

[data-theme="dark"] .expense-row-conversion {
  color: rgba(255, 255, 255, 0.5);
}

/* Dark Mode Calendar Popup Styles */
[data-theme="dark"] .calendar-trigger {
  background: rgba(26, 24, 18, 0.8);
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .calendar-trigger:hover {
  background: rgba(122, 140, 111, 0.1);
  border-color: var(--sage-green);
}

[data-theme="dark"] .calendar-popup {
  background: var(--soft-beige);
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .close-btn {
  color: rgba(255, 255, 255, 0.6);
}

[data-theme="dark"] .close-btn:hover {
  background: rgba(122, 140, 111, 0.2);
  color: var(--charcoal);
}

[data-theme="dark"] .year-btn {
  background: var(--paper-white);
  border-color: rgba(122, 140, 111, 0.3);
  color: var(--charcoal);
}

[data-theme="dark"] .year-btn:hover {
  background: rgba(122, 140, 111, 0.1);
  border-color: var(--sage-green);
}

[data-theme="dark"] .year-btn.selected {
  background: var(--sage-green);
  color: white;
  border-color: var(--sage-green);
}

[data-theme="dark"] .month-btn-popup {
  background: var(--paper-white);
  border-color: rgba(122, 140, 111, 0.3);
  color: var(--charcoal);
}

[data-theme="dark"] .month-btn-popup:hover {
  background: rgba(122, 140, 111, 0.1);
  border-color: var(--sage-green);
}

[data-theme="dark"] .month-btn-popup.selected {
  background: var(--sage-green);
  color: white;
  border-color: var(--sage-green);
}

[data-theme="dark"] .month-btn-popup.has-data {
  border-color: var(--muted-teal);
}

[data-theme="dark"] .calendar-instructions {
  background: rgba(122, 140, 111, 0.1);
  border-color: rgba(122, 140, 111, 0.2);
}

[data-theme="dark"] .calendar-instructions p {
  color: rgba(255, 255, 255, 0.6);
}

[data-theme="dark"] .calendar-separator::after {
  background: var(--soft-beige);
  color: var(--sage-green);
}

/* === AUTHENTICATION STYLES === */

/* Auth Container */
.auth-container {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--gradient-soft);
  padding: 20px;
}

.auth-background {
  position: relative;
  width: 100%;
  max-width: 1200px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 60px;
}

.auth-nature-bg {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 0;
}

.auth-nature-bg .nature-element {
  position: absolute;
  font-size: 2rem;
  opacity: 0.1;
  animation: authFloat 8s infinite ease-in-out;
}

.auth-nature-bg .nature-element:nth-child(1) {
  top: 10%;
  left: 10%;
  animation-delay: 0s;
}

.auth-nature-bg .nature-element:nth-child(2) {
  top: 20%;
  right: 15%;
  animation-delay: 2s;
}

.auth-nature-bg .nature-element:nth-child(3) {
  bottom: 30%;
  left: 20%;
  animation-delay: 4s;
}

.auth-nature-bg .nature-element:nth-child(4) {
  bottom: 10%;
  right: 10%;
  animation-delay: 6s;
}

@keyframes authFloat {
  0%,
  100% {
    transform: translateY(0px) rotate(0deg);
  }
  25% {
    transform: translateY(-10px) rotate(2deg);
  }
  50% {
    transform: translateY(-5px) rotate(-1deg);
  }
  75% {
    transform: translateY(-8px) rotate(1deg);
  }
}

.auth-content {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 40px;
  width: 100%;
  max-width: 400px;
}

/* Auth Brand */
.auth-brand {
  text-align: center;
  margin-bottom: 20px;
}

.auth-brand h1 {
  font-family: "Playfair Display", serif;
  font-size: 2.5rem;
  color: var(--charcoal);
  margin-bottom: 10px;
  font-weight: 700;
}

.auth-brand p {
  font-family: "Inter", sans-serif;
  color: var(--text-soft);
  font-size: 1.1rem;
  margin: 0;
}

.auth-brand-header-row .theme-toggle {
  position: static;
  background: var(--paper-white);
  border: 1px solid rgba(168, 181, 160, 0.4);
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.auth-brand-header-row .theme-toggle:hover {
  transform: translateY(-2px);
  background: linear-gradient(135deg, #ffffff 0%, #f3f5f2 100%);
}

[data-theme="dark"] .auth-brand-header-row .theme-toggle {
  background: #1e1f1d;
  border-color: rgba(125, 140, 120, 0.4);
}

[data-theme="dark"] .auth-brand-header-row .theme-toggle:hover {
  background: #262724;
}
/* Auth Form Container */
.auth-form-container {
  width: 100%;
}

.auth-form {
  background: var(--paper-white);
  border-radius: 20px;
  padding: 40px;
  box-shadow: var(--shadow-soft);
  border: 1px solid rgba(168, 181, 160, 0.2);
  width: 100%;
}

.auth-header {
  text-align: center;
  margin-bottom: 30px;
}

.auth-header h2 {
  font-family: "Playfair Display", serif;
  font-size: 1.8rem;
  color: var(--charcoal);
  margin-bottom: 8px;
  font-weight: 600;
}

.auth-header p {
  font-family: "Inter", sans-serif;
  color: var(--text-soft);
  margin: 0;
  font-size: 0.95rem;
}

/* Auth Form Content */
.auth-form-content {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.auth-form-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.auth-form-group label {
  font-family: "Inter", sans-serif;
  font-weight: 600;
  color: var(--charcoal);
  font-size: 0.9rem;
}

.auth-form-group input {
  padding: 12px 16px;
  border: 2px solid rgba(168, 181, 160, 0.3);
  border-radius: 10px;
  font-family: "Inter", sans-serif;
  font-size: 1rem;
  background: var(--cream-white);
  color: var(--charcoal);
  transition: all 0.3s ease;
}

.auth-form-group input:focus {
  outline: none;
  border-color: var(--sage-green);
  box-shadow: 0 0 0 3px rgba(168, 181, 160, 0.1);
}

.auth-form-group input.error {
  border-color: var(--dusty-rose);
  box-shadow: 0 0 0 3px rgba(193, 154, 132, 0.1);
}

.auth-form-group input:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Auth Error Messages */
.auth-error-message {
  padding: 12px 16px;
  background: linear-gradient(135deg, #f8d7da, #f5c6cb);
  color: #721c24;
  border-radius: 8px;
  border: 1px solid #f5c6cb;
  font-weight: 600;
  text-align: center;
  font-family: "Inter", sans-serif;
  font-size: 0.9rem;
}

.auth-field-error {
  color: var(--dusty-rose);
  font-size: 0.8rem;
  font-family: "Inter", sans-serif;
  font-weight: 500;
  margin-top: 2px;
}

/* Auth Submit Button */
.auth-submit-btn {
  padding: 14px 24px;
  background: var(--gradient-sage);
  color: white;
  border: none;
  border-radius: 12px;
  font-family: "Inter", sans-serif;
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-top: 10px;
}

.auth-submit-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: var(--shadow-button);
}

.auth-submit-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

/* Auth Switch */
.auth-switch {
  text-align: center;
  margin-top: 20px;
}

.auth-switch p {
  font-family: "Inter", sans-serif;
  color: var(--text-soft);
  font-size: 0.9rem;
  margin: 0;
}

.auth-switch-btn {
  background: none;
  border: none;
  color: var(--sage-green);
  font-family: "Inter", sans-serif;
  font-weight: 600;
  font-size: 0.9rem;
  cursor: pointer;
  text-decoration: underline;
  transition: color 0.2s ease;
}

.auth-switch-btn:hover:not(:disabled) {
  color: var(--charcoal);
}

.auth-switch-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Responsive Auth */
@media (max-width: 768px) {
  .auth-background {
    flex-direction: column;
    gap: 30px;
  }

  .auth-brand h1 {
    font-size: 2rem;
  }

  .auth-form {
    padding: 30px 20px;
  }
}

/* Dark Mode Auth Styles */
[data-theme="dark"] .auth-form {
  background: var(--paper-white);
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .auth-form-group input {
  background: var(--cream-white);
  color: #e8e8e8;
  border-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .auth-form-group input:focus {
  border-color: var(--sage-green);
}

[data-theme="dark"] .auth-brand h1,
[data-theme="dark"] .auth-header h2,
[data-theme="dark"] .auth-form-group label {
  color: #e8e8e8;
}

[data-theme="dark"] .auth-brand p,
[data-theme="dark"] .auth-header p,
[data-theme="dark"] .auth-switch p {
  color: #b8b8b8;
}

/* === APP LOADING & USER HEADER === */

/* App Loading */
.app-loading {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--gradient-soft);
}

.loading-content {
  text-align: center;
}

.loading-content h1 {
  font-family: "Playfair Display", serif;
  font-size: 2.5rem;
  color: var(--charcoal);
  margin-bottom: 20px;
  font-weight: 700;
}

.loading-content .loading {
  font-family: "Inter", sans-serif;
  color: var(--text-soft);
  font-size: 1.1rem;
}

/* User Header */
.user-header {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  padding: 12px 24px;
  background: var(--paper-white);
  border-bottom: 1px solid rgba(168, 181, 160, 0.2);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.user-header-left {
  justify-self: start;
}

.user-header-center {
  justify-self: center;
}

.user-header-actions {
  display: flex;
  align-items: center;
  gap: 12px;
  justify-self: end;
}

.header-title {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--forest-green);
}

.title-text {
  color: var(--forest-green);
}

.user-header .theme-toggle {
  position: static;
  width: 40px;
  height: 40px;
  border-radius: 10px;
  background: var(--paper-white);
  border: 1px solid rgba(168, 181, 160, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);
}

.user-header .theme-toggle:hover {
  transform: translateY(-2px);
}

.logout-btn {
  margin-left: 4px;
}

.user-greeting {
  font-family: "Inter", sans-serif;
  color: var(--charcoal);
  font-weight: 500;
  font-size: 0.95rem;
}

.logout-btn {
  padding: 8px 16px;
  background: var(--dusty-rose);
  color: white;
  border: none;
  border-radius: 8px;
  font-family: "Inter", sans-serif;
  font-weight: 500;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.logout-btn:hover {
  background: #b8847a;
  transform: translateY(-1px);
}

/* Dark Mode App Loading & User Header */
[data-theme="dark"] .loading-content h1 {
  color: #e8e8e8;
}

[data-theme="dark"] .loading-content .loading {
  color: #b8b8b8;
}

[data-theme="dark"] .user-header {
  background: var(--paper-white);
  border-bottom-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .user-greeting {
  color: #e8e8e8;
}

/* Dark Mode Show Labels Button & Display */
[data-theme="dark"] .show-labels-btn {
  background: linear-gradient(
    135deg,
    rgba(122, 140, 111, 0.8),
    rgba(168, 181, 160, 0.6)
  );
  border: 2px solid rgba(122, 140, 111, 0.4);
  color: var(--soft-beige);
}

[data-theme="dark"] .show-labels-btn:hover {
  background: linear-gradient(
    135deg,
    rgba(122, 140, 111, 0.9),
    rgba(168, 181, 160, 0.7)
  );
  border-color: rgba(122, 140, 111, 0.6);
  box-shadow: 0 6px 20px rgba(122, 140, 111, 0.25);
}

[data-theme="dark"] .all-labels-display {
  background: rgba(45, 45, 45, 0.95);
  border: 2px solid rgba(122, 140, 111, 0.3);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .all-labels-display h3 {
  color: var(--soft-beige);
  border-bottom-color: rgba(122, 140, 111, 0.3);
}

[data-theme="dark"] .labels-grid .label-item {
  background: rgba(122, 140, 111, 0.1);
  border: 1px solid rgba(122, 140, 111, 0.2);
  color: var(--soft-beige);
}

[data-theme="dark"] .labels-grid .label-item:hover {
  background: rgba(122, 140, 111, 0.2);
  border-color: rgba(122, 140, 111, 0.4);
}

[data-theme="dark"] .labels-grid .label-name {
  color: var(--soft-beige);
}

[data-theme="dark"] .labels-grid .label-amount {
  color: rgba(168, 181, 160, 0.9);
}

[data-theme="dark"] .labels-grid .label-percentage {
  color: #aaa;
}
